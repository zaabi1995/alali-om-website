import{r as l,j as e}from"./index-DCzm5dYH.js";import{O as B,g as z,aM as b,aL as k,aB as v,ac as I,aW as E,aY as F,aV as g}from"./IdurarOs-5H8D4UsJ.js";import{C as w}from"./index-t2nl2h8r.js";import{F as R,T as P,k as T}from"./ErpApp-BJzr13dj.js";import{P as L}from"./index-DVhdscOK.js";import{s as n}from"./index-CPOrKpva.js";import{C as U}from"./CheckCircleOutlined-DU13GZQ9.js";import{F as A}from"./FileImageOutlined-DWUAZwuw.js";import{U as N}from"./UploadOutlined-DYf22A3B.js";import"./Skeleton-BSD5JXt8.js";import"./index-8VTgkq8a.js";import"./PlusOutlined-BqRacPGF.js";import"./ActionButton-D2FNOrMo.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},M=function(d,p){return l.createElement(B,z({},d,{ref:p,icon:G}))};const W=l.forwardRef(M),{Title:D,Text:c,Paragraph:S}=F;function u(){return{Authorization:`Bearer ${((JSON.parse(localStorage.getItem("auth"))||{}).current||{}).token}`}}const $=[{key:"invoice",label:"Invoice",color:"#034D57"},{key:"quote",label:"Quote / Offer",color:"#1890ff"},{key:"purchaseorder",label:"Purchase Order",color:"#4CB480"},{key:"expense",label:"Expense Voucher",color:"#fa8c16"},{key:"vendorbill",label:"Vendor Bill",color:"#e53e3e"},{key:"deliverynote",label:"Delivery Note",color:"#722ed1"},{key:"creditnote",label:"Credit Note",color:"#eb2f96"},{key:"payment",label:"Payment Receipt",color:"#52c41a"}];function oe(){const[m,d]=l.useState({}),[p,h]=l.useState({}),[J,y]=l.useState(!1),x=l.useRef({}),f=async()=>{y(!0);try{const t=await fetch(g+"pdf-designer/backgrounds",{headers:u()}).then(r=>r.json());t.success&&d(t.result||{})}finally{y(!1)}};l.useEffect(()=>{f()},[]);const C=async(t,r)=>{if(!["image/png","image/jpeg","image/jpg"].includes(r.type)){n.error("Only PNG or JPG allowed (max 5MB)");return}if(r.size>5*1024*1024){n.error("File too large — max 5MB");return}h(s=>({...s,[t]:!0}));const i=new FormData;i.append("background",r),i.append("docType",t);try{const s=await fetch(g+"pdf-designer/upload",{method:"POST",headers:u(),body:i}).then(o=>o.json());s.success?(n.success(s.message),f()):n.error(s.message||"Upload failed")}finally{h(s=>({...s,[t]:!1}))}},O=async t=>{const r=await fetch(g+`pdf-designer/remove/${t}`,{method:"DELETE",headers:u()}).then(a=>a.json()).catch(()=>({}));r.success?(n.success(r.message),f()):n.error(r.message||"Failed")};return e.jsxs("div",{style:{padding:24,maxWidth:900},children:[e.jsx(D,{level:4,style:{margin:"0 0 4px",color:"#034D57"},children:"PDF Designer"}),e.jsx(S,{type:"secondary",style:{marginBottom:20},children:"Upload a custom background image (PNG or JPG, max 5MB) for each document type. It will appear as a watermark/design layer behind the PDF content. Ideal for letterheads, branded paper, or watermark designs."}),e.jsx(w,{size:"small",style:{marginBottom:20,background:"#f0f6f7",border:"1px solid #d0e8eb"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[e.jsx(W,{style:{color:"#034D57",marginTop:2}}),e.jsxs("div",{children:[e.jsx(c,{strong:!0,style:{color:"#034D57"},children:"Tips for best results"}),e.jsxs("ul",{style:{margin:"6px 0 0",paddingLeft:18,fontSize:12,color:"#555",lineHeight:1.8},children:[e.jsx("li",{children:"Use A4 portrait dimensions (794 × 1123 px at 96dpi, or 2480 × 3508 px at 300dpi)"}),e.jsx("li",{children:"PNG with transparency works best for watermarks"}),e.jsx("li",{children:"Background opacity is fixed at 8% — design for full opacity, it will render soft"}),e.jsx("li",{children:"After uploading, regenerate any existing PDFs (cached copies won't update automatically)"})]})]})]})}),e.jsx(b,{gutter:[16,16],children:$.map(t=>{var s;const r=m[t.key]||{},a=r.set,i=p[t.key];return e.jsx(k,{xs:24,sm:12,md:8,children:e.jsxs(w,{size:"small",style:{borderRadius:10,borderLeft:`3px solid ${t.color}`,height:"100%"},bodyStyle:{padding:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[e.jsx(R,{style:{color:t.color,fontSize:16}}),e.jsx(c,{strong:!0,style:{fontSize:13},children:t.label}),a?e.jsx(P,{icon:e.jsx(U,{}),color:"success",style:{marginLeft:"auto",fontSize:10},children:"Set"}):e.jsx(P,{color:"default",style:{marginLeft:"auto",fontSize:10},children:"None"})]}),a&&e.jsxs("div",{style:{background:"#f8f8f8",border:"1px dashed #ccc",borderRadius:6,padding:"8px 10px",marginBottom:10,display:"flex",alignItems:"center",gap:6},children:[e.jsx(A,{style:{color:"#888"}}),e.jsx(c,{type:"secondary",style:{fontSize:11,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(s=r.path)==null?void 0:s.split("/").pop()})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("label",{style:{flex:1},children:[e.jsx("input",{type:"file",accept:".png,.jpg,.jpeg",style:{display:"none"},ref:o=>x.current[t.key]=o,onChange:o=>{var j;(j=o.target.files)!=null&&j[0]&&C(t.key,o.target.files[0]),o.target.value=""}}),e.jsx(v,{block:!0,icon:e.jsx(N,{}),loading:i,style:{borderColor:t.color,color:t.color},onClick:()=>{var o;return(o=x.current[t.key])==null?void 0:o.click()},children:a?"Replace":"Upload"})]}),a&&e.jsx(L,{title:"Remove background?",description:"This will clear the custom background for this document type.",onConfirm:()=>O(t.key),okText:"Remove",cancelText:"Cancel",okButtonProps:{danger:!0},children:e.jsx(I,{title:"Remove background",children:e.jsx(v,{danger:!0,icon:e.jsx(T,{})})})})]})]})},t.key)})}),e.jsx(E,{style:{margin:"28px 0 16px"}}),e.jsxs("div",{children:[e.jsx(D,{level:5,style:{color:"#034D57",marginBottom:8},children:"How it works"}),e.jsx(b,{gutter:[16,16],children:[{n:"1",title:"Design your background",desc:"Create an A4-sized image in Photoshop, Canva, or any design tool. Use your company letterhead, watermark, or branded paper design."},{n:"2",title:"Upload here",desc:"Upload PNG or JPG per document type. Each type gets its own design."},{n:"3",title:"Automatic on all PDFs",desc:"Every new PDF generated for that document type will include your background. Old cached PDFs will be cleared automatically on upload."}].map(t=>e.jsx(k,{xs:24,sm:8,children:e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:"#034D57",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:13,flexShrink:0},children:t.n}),e.jsxs("div",{children:[e.jsx(c,{strong:!0,style:{fontSize:13},children:t.title}),e.jsx(S,{type:"secondary",style:{fontSize:11,marginTop:4,marginBottom:0},children:t.desc})]})]})},t.n))})]})]})}export{oe as default};
