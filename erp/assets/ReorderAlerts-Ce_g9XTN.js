import{r as n,j as e}from"./index-BnwzPVl3.js";import{o as A}from"./omrFormat-DClzAN53.js";import{aM as C,aL as c,aY as I,aV as O}from"./IdurarOs-C_8FWDwN.js";import{g as k,ac as T,T as s,y as R}from"./ErpApp-DAT-Lv-2.js";import{A as B}from"./index-Ra7f0knE.js";import{C as a}from"./index-CcPbW-4d.js";import{S as d}from"./index-CaXkTdFM.js";import{F as N}from"./Table-CTlfrv94.js";import{W as u}from"./WarningOutlined-3i7Bw8cr.js";import{A as f}from"./AlertOutlined-BtmCqpee.js";import{C as x}from"./ClockCircleOutlined-CU-M3lCR.js";import"./Skeleton-VwHRjmeX.js";import"./index-wigWtylq.js";import"./PlusOutlined-CfM5Z-xV.js";k.extend(T);const{Title:E}=I;function L(){return{Authorization:`Bearer ${((JSON.parse(localStorage.getItem("auth"))||{}).current||{}).token}`}}function F(o){return A(o)}function Y(){const[o,j]=n.useState([]),[m,g]=n.useState(!1),[h,p]=n.useState({critical:0,high:0,medium:0}),y=async()=>{g(!0);try{const t=await(await fetch(O+"inventoryitem/reorder-alerts",{headers:L()})).json();if(t.success){j(t.result||[]);const i=t.result.filter(l=>l.severity==="critical").length,w=t.result.filter(l=>l.severity==="high").length,b=t.result.filter(l=>l.severity==="medium").length;p({critical:i,high:w,medium:b})}}finally{g(!1)}};n.useEffect(()=>{y()},[]);const v=r=>r==="critical"?"red":r==="high"?"orange":"yellow",S=[{title:"Severity",dataIndex:"severity",width:100,render:r=>e.jsx(s,{color:v(r),icon:e.jsx(u,{}),children:r.toUpperCase()}),sorter:(r,t)=>{const i={critical:3,high:2,medium:1};return(i[t.severity]||0)-(i[r.severity]||0)},defaultSortOrder:"ascend"},{title:"Part Number",dataIndex:"partNumber",render:r=>e.jsx("strong",{children:r}),width:140},{title:"Description",dataIndex:"description",ellipsis:!0},{title:"Available Stock",dataIndex:"qtyAvailable",align:"center",width:120,render:r=>e.jsx(R,{count:r,showZero:!0,style:{backgroundColor:r===0?"#e53e3e":"#f59e0b"}})},{title:"Reorder Level",dataIndex:"reorderLevel",align:"center",width:120,render:r=>e.jsx(s,{color:"blue",children:r})},{title:"Max Stock",dataIndex:"maxStock",align:"center",width:100,render:r=>r>0?r:"â€”"},{title:"Suggested Order Qty",dataIndex:"suggestedOrderQty",align:"center",width:150,render:r=>e.jsx("strong",{style:{color:"#4CB480",fontSize:"16px"},children:r})},{title:"Est. Cost",dataIndex:"unitCost",align:"right",width:120,render:(r,t)=>{const i=r*t.suggestedOrderQty;return F(i)}},{title:"Stockout Forecast",dataIndex:"daysUntilStockout",width:150,render:(r,t)=>t.qtyAvailable===0?e.jsx(s,{color:"red",icon:e.jsx(f,{}),children:"OUT OF STOCK"}):r===null?e.jsx("span",{style:{color:"#999"},children:"No data"}):r<=7?e.jsxs(s,{color:"red",icon:e.jsx(x,{}),children:[r," days"]}):r<=30?e.jsxs(s,{color:"orange",icon:e.jsx(x,{}),children:[r," days"]}):e.jsxs(s,{color:"green",icon:e.jsx(x,{}),children:[r," days"]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(E,{level:3,children:[e.jsx(u,{style:{color:"#f59e0b",marginRight:"8px"}}),"Inventory Reorder Alerts"]})}),o.length===0&&!m?e.jsx(B,{message:"No Reorder Alerts",description:"All inventory items are above their reorder levels. Great job!",type:"success",showIcon:!0,style:{marginBottom:"24px"}}):e.jsxs(C,{gutter:16,style:{marginBottom:"24px"},children:[e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(d,{title:"Total Alerts",value:o.length,valueStyle:{color:"#f59e0b"},prefix:e.jsx(u,{})})})}),e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(d,{title:"Critical (Out of Stock)",value:h.critical,valueStyle:{color:"#e53e3e"},prefix:e.jsx(f,{})})})}),e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(d,{title:"High Priority",value:h.high,valueStyle:{color:"#f59e0b"},prefix:e.jsx(u,{})})})}),e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(d,{title:"Medium Priority",value:h.medium,valueStyle:{color:"#fbbf24"},prefix:e.jsx(x,{})})})})]}),e.jsx(a,{children:e.jsx(N,{columns:S,dataSource:o,loading:m,rowKey:"_id",pagination:{pageSize:20},rowClassName:r=>r.severity==="critical"?"row-critical":r.severity==="high"?"row-high":""})}),e.jsx("style",{jsx:!0,children:`
        .row-critical {
          background-color: #fee;
        }
        .row-high {
          background-color: #fff3e0;
        }
      `})]})}export{Y as default};
