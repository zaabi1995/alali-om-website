import{m as v,r,j as e}from"./index-B_4eKp3O.js";import{aM as g,aL as u,aX as I,aB as P,aY as B,aV as E,aS as T}from"./IdurarOs-DJEruZJs.js";import{C as f}from"./index-DSpEofHK.js";import{F as _}from"./Table-BuPp2kFk.js";import{G as A}from"./GlobalOutlined-DFYHuD5h.js";import{T as j,r as L}from"./ErpApp-ByZxq-md.js";import{P as N}from"./PhoneOutlined-BTIk80tF.js";import{R as O}from"./ReloadOutlined-Co0q2jMH.js";import"./Skeleton-BZGa1gxJ.js";import"./index-BXo1Csai.js";import"./PlusOutlined-Yh4yKj96.js";function $(){var i,o;try{const l=(o=(i=JSON.parse(localStorage.getItem("auth")||"{}"))==null?void 0:i.current)==null?void 0:o.token;return l?{Authorization:`Bearer ${l}`}:{}}catch{return{}}}const{Title:D,Text:h}=B;function Z(){const i=v(),[o,l]=r.useState([]),[b,m]=r.useState(!0),[c,w]=r.useState({current:1,pageSize:25,total:0}),[z,C]=r.useState(""),[d,x]=r.useState(""),n=async(t=1,a=z)=>{m(!0);const s=new URLSearchParams({page:t,items:25,...a&&{fields:"companyName,website,country,contactEmail",q:a}}),p=await(await fetch(E+`vendor/list?${s}`,{headers:$()})).json();p.success!==!1&&(l(p.result||[]),w(R=>{var S;return{...R,current:t,total:((S=p.pagination)==null?void 0:S.count)||0}})),m(!1)};r.useEffect(()=>{n()},[]);const y=()=>{C(d),n(1,d)},k=[{title:"Supplier Name",dataIndex:"companyName",key:"companyName",render:(t,a)=>{var s;return e.jsxs("div",{children:[e.jsx(h,{strong:!0,style:{color:"#034D57",fontSize:13},children:t||"—"}),a.website&&e.jsx("div",{children:e.jsxs("a",{href:a.website.startsWith("http")?a.website:`https://${a.website}`,target:"_blank",rel:"noreferrer",style:{fontSize:11,color:"#1890ff"},children:[e.jsx(A,{})," ",(s=a.website)==null?void 0:s.replace(/^https?:\/\//,"")]})})]})}},{title:"Country",dataIndex:"country",key:"country",width:100,render:t=>t?e.jsx(j,{style:{fontSize:11},children:t}):"—"},{title:"Contact",key:"contact",width:220,render:(t,a)=>e.jsxs(L,{direction:"vertical",size:2,children:[a.contactEmail&&e.jsxs(h,{style:{fontSize:12},children:[e.jsx(T,{})," ",a.contactEmail]}),a.contactPhone&&e.jsxs(h,{style:{fontSize:12},children:[e.jsx(N,{})," ",a.contactPhone]})]})},{title:"Specialties",dataIndex:"specialties",key:"specialties",ellipsis:!0,render:t=>Array.isArray(t)&&t.length?t.slice(0,3).map((a,s)=>e.jsx(j,{style:{fontSize:11,margin:"1px 2px"},children:a},s)):"—"},{title:"Added",dataIndex:"created",key:"created",width:100,render:t=>t?new Date(t).toLocaleDateString("en-GB"):"—"}];return e.jsxs("div",{style:{paddingBottom:24},children:[e.jsx(g,{justify:"space-between",align:"middle",style:{marginBottom:16},children:e.jsx(u,{children:e.jsxs(D,{level:4,style:{margin:0,color:"#034D57"},children:["Suppliers — ",c.total.toLocaleString()]})})}),e.jsx(f,{style:{marginBottom:16,borderRadius:8},bodyStyle:{padding:"12px 16px"},children:e.jsxs(g,{gutter:[8,8],align:"middle",children:[e.jsx(u,{xs:24,sm:12,md:8,children:e.jsx(I.Search,{placeholder:"Search by name, country, website...",value:d,onChange:t=>x(t.target.value),onSearch:y,onPressEnter:y,allowClear:!0,onClear:()=>{x(""),n(1,"")}})}),e.jsx(u,{children:e.jsx(P,{icon:e.jsx(O,{}),onClick:()=>n(),children:"Refresh"})})]})}),e.jsx(f,{style:{borderRadius:8},bodyStyle:{padding:0},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsx(_,{dataSource:o,columns:k,rowKey:"_id",loading:b,size:"small",onRow:t=>({onClick:()=>i(`/suppliers/${t._id}`),style:{cursor:"pointer"}}),pagination:{current:c.current,pageSize:c.pageSize,total:c.total,showSizeChanger:!1,showTotal:t=>`${t} suppliers`,onChange:t=>n(t)}})})})]})}export{Z as default};
