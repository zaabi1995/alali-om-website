import{r as p,j as e,m as Ie,n as Qe,u as Ve}from"./index-BnwzPVl3.js";import"./currency.es-9OAR_aOO.js";import{F as He,D as Ge,E as Ye,s as Je,O as A,T as W,I as ze,a as Ce,C as we,S as De,b as K,B as ke,c as Ke,d as Be}from"./ErpApp-DAT-Lv-2.js";import{O as Ze,g as Xe,b4 as qe,b5 as et,aU as tt,b6 as st,aZ as Re,aV as d,b7 as Z,aM as k,aL as b,aB as I,aN as q,aY as ot}from"./IdurarOs-C_8FWDwN.js";import{u as it}from"./useFetch-CmFYpnPb.js";import{e as Ae}from"./actions-D3U3tUBh.js";import{F as nt}from"./Table-CTlfrv94.js";import{A as U}from"./index-Ra7f0knE.js";import{W as lt}from"./WarningOutlined-3i7Bw8cr.js";import{A as Te}from"./AlertOutlined-BtmCqpee.js";import{C as R}from"./index-CcPbW-4d.js";import{P as rt}from"./progress-DpPRCYM4.js";import{C as X}from"./CheckCircleOutlined-C9idzao0.js";import{T as _}from"./Timeline-BS-7fIyx.js";import{C as at}from"./ClockCircleOutlined-CU-M3lCR.js";import"./Skeleton-VwHRjmeX.js";import"./index-wigWtylq.js";import"./PlusOutlined-CfM5Z-xV.js";var ct={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},dt=function(r,o){return p.createElement(Ze,Xe({},r,{ref:o,icon:ct}))};const Pe=p.forwardRef(dt);function Oe({...i}){const r=tt();let{entity:o,dataTableColumns:x}=i;const a=[{label:r("Show"),key:"read",icon:e.jsx(qe,{})},{label:r("Edit"),key:"edit",icon:e.jsx(et,{})},{label:r("Download"),key:"download",icon:e.jsx(He,{})}],m=Ie(),c=Qe(),S=g=>{c(Ae.currentItem({data:g})),m(`/${o}/read/${g._id}`)},C=g=>{c(Ae.currentAction({actionType:"update",data:g})),m(`/${o}/update/${g._id}`)},Q=g=>{window.open(`${st}${o}/${o}-${g._id}.pdf`,"_blank")};x=[...x,{title:"",key:"action",render:(g,j)=>e.jsx(Ge,{menu:{items:a,onClick:({key:L})=>{switch(L){case"read":S(j);break;case"edit":C(j);break;case"download":Q(j);break}}},trigger:["click"],children:e.jsx(Ye,{style:{cursor:"pointer",fontSize:"24px"},onClick:L=>L.preventDefault()})})}];const h=()=>Re.list({entity:o}),{result:N,isLoading:y,isSuccess:$}=it(h),l=()=>$&&N?N.slice(0,5):[];return e.jsx(nt,{columns:x,rowKey:g=>g._id,dataSource:$&&l(),pagination:!1,loading:y,scroll:{x:!0}})}const{Title:v,Text:Tt}=ot;function u(){return{Authorization:`Bearer ${((JSON.parse(localStorage.getItem("auth"))||{}).current||{}).token}`}}function f({icon:i,label:r,value:o,color:x,subtitle:a,loading:m,onClick:c}){const S=window.innerWidth<768;return e.jsx(b,{xs:12,sm:8,md:6,lg:4,children:e.jsxs(R,{onClick:c,style:{borderRadius:10,border:`1px solid ${x}22`,cursor:c?"pointer":"default",transition:"box-shadow 0.2s"},bodyStyle:{padding:S?"10px 8px":"14px 12px",textAlign:"center"},hoverable:!!c,children:[e.jsx("div",{style:{fontSize:S?18:24,color:x,marginBottom:4},children:i}),m?e.jsx(q,{size:"small"}):e.jsx("div",{style:{fontSize:S?18:24,fontWeight:800,color:"#034D57",lineHeight:1},children:(o==null?void 0:o.toLocaleString())??"—"}),e.jsx("div",{style:{fontSize:S?10:12,color:"#555",marginTop:3,fontWeight:600},children:r}),a&&e.jsx("div",{style:{fontSize:S?9:11,color:"#aaa",marginTop:1},children:a})]})})}function B({title:i,value:r,subtitle:o,loading:x,color:a="#034D57"}){const m=window.innerWidth<768,c=!x&&r!==void 0?Number(r||0).toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}):null;return e.jsx(b,{xs:24,sm:12,md:6,lg:6,children:e.jsxs(R,{style:{borderRadius:10,borderLeft:`3px solid ${a}`},bodyStyle:{padding:m?"10px 12px":"14px 16px"},children:[e.jsx("div",{style:{fontSize:m?10:12,color:"#888",fontWeight:600,marginBottom:6},children:i}),x?e.jsx(q,{size:"small"}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:m?5:7},children:[e.jsx(A,{size:m?12:14,style:{filter:"brightness(0) saturate(100%) invert(20%) sepia(60%) saturate(400%) hue-rotate(160deg)"}}),e.jsx("span",{style:{fontSize:m?16:20,fontWeight:800,color:a,fontVariantNumeric:"tabular-nums"},children:c??"0.000"})]}),e.jsx("div",{style:{fontSize:m?9:11,color:"#aaa",marginTop:2},children:o})]})})}function E({done:i,label:r,action:o,path:x,navigate:a}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"6px 0",borderBottom:"1px solid #f0f0f0"},children:[i?e.jsx(X,{style:{color:"#52c41a",fontSize:16}}):e.jsx(at,{style:{color:"#faad14",fontSize:16}}),e.jsx("span",{style:{flex:1,fontSize:13,color:i?"#888":"#333",textDecoration:i?"line-through":"none"},children:r}),!i&&e.jsxs(I,{size:"small",type:"link",style:{color:"#034D57",padding:0},onClick:()=>a(x),children:[o," →"]})]})}function ut(){var oe,ie,ne,le,re,ae,ce,de,ue,he,pe,xe,me,ye;const i=Ie(),r=Ve(Je),[o,x]=p.useState(null),[a,m]=p.useState(!0),[c,S]=p.useState(null),[C,Q]=p.useState(null),[h,N]=p.useState(null),[y,$]=p.useState(null),[l,g]=p.useState(null),[j,L]=p.useState(null),[ee,Le]=p.useState(!0),[w,Fe]=p.useState(null);p.useEffect(()=>{fetch(d+"rfq/stats",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&x(t.result)}).catch(()=>{}).finally(()=>m(!1)),fetch(d+"opportunity/stats",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&S(t.result)}).catch(()=>{}),fetch(d+"employee/stats",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&N(t.result)}).catch(()=>{});const s=new Date,z=new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0],Ee=new Date().toISOString().split("T")[0];Promise.all([fetch(d+"vendorbill/ap-summary",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+`expense/summary?from=${z}&to=${Ee}`,{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"bankaccount/list",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"project/list?status=active",{headers:u()}).then(t=>t.json()).catch(()=>({}))]).then(([t,P,O,D])=>{Q({apDue:t.grandTotal||0,expTotal:P.grandTotal||0,bankBal:(O.result||[]).reduce((M,F)=>M+(F.currency==="OMR"&&F.currentBalance||0),0),activeProj:(D.result||[]).length})}).catch(()=>{}),Promise.all([fetch(d+"employee/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"product/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"bankaccount/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"client/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({}))]).then(([t,P,O,D])=>{var M,F,ge,je,fe,ve,be,Se;$({employees:((M=t.pagination)==null?void 0:M.count)||((F=t.result)==null?void 0:F.length)||0,products:((ge=P.pagination)==null?void 0:ge.count)||((je=P.result)==null?void 0:je.length)||0,bankAccounts:((fe=O.pagination)==null?void 0:fe.count)||((ve=O.result)==null?void 0:ve.length)||0,clients:((be=D.pagination)==null?void 0:be.count)||((Se=D.result)==null?void 0:Se.length)||0})}).catch(()=>{}),Promise.all([fetch(d+"reports/overdue",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"payrollrun/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({}))]).then(([t,P])=>{g({overdueCount:(t.result||[]).length,overdueAmount:(t.result||[]).reduce((O,D)=>O+(D.total-(D.totalPaid||0)),0),lastPayroll:(P.result||[])[0]||null})}).catch(()=>{}),fetch(d+"rfq/recent-activity",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&L(t.result)}).catch(()=>{}).finally(()=>Le(!1)),fetch(d+"inventoryitem/reorder-alerts",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&Fe(t.result||[])}).catch(()=>{})},[]);const V=async({entity:s,currency:z})=>Re.summary({entity:s,options:{currency:z}}),{result:T,isLoading:te,onFetch:Ne}=Z(),{result:H,isLoading:$e,onFetch:Me}=Z(),{result:G,isLoading:We,onFetch:Ue}=Z();p.useEffect(()=>{const s=(r==null?void 0:r.default_currency_code)||"OMR";Ne(V({entity:"invoice",currency:s})),Me(V({entity:"quote",currency:s})),Ue(V({entity:"payment",currency:s}))},[r==null?void 0:r.default_currency_code]);const se=[{title:"#",dataIndex:"number",width:70},{title:"Client",dataIndex:["client","name"],ellipsis:!0},{title:"Total",dataIndex:"total",align:"right",render:s=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:12},children:[e.jsx(A,{size:10}),Number(s||0).toLocaleString("en-US",{minimumFractionDigits:3})]})},{title:"Status",dataIndex:"status",width:90,render:s=>e.jsx("span",{style:{fontSize:12,textTransform:"capitalize"},children:s})}];if(!r)return null;const Y=y?[y.employees>0,y.products>0,y.bankAccounts>0,y.clients>0].filter(Boolean).length:0,J=4,_e=y&&Y<J,n=window.innerWidth<768;return e.jsxs("div",{style:{padding:n?"8px":"16px"},children:[l&&(l.overdueCount>0||((oe=o==null?void 0:o.byPriority)==null?void 0:oe.ior)>0)&&e.jsxs("div",{style:{marginBottom:n?12:20},children:[e.jsx(v,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:n?11:12,letterSpacing:1.5,marginBottom:10},children:"Today at a Glance"}),e.jsxs(k,{gutter:[8,8],children:[l.overdueCount>0&&e.jsx(b,{xs:24,sm:24,md:12,children:e.jsx(U,{type:"error",showIcon:!0,icon:e.jsx(lt,{}),message:e.jsxs("span",{style:{fontSize:n?12:14},children:[e.jsx("strong",{children:l.overdueCount})," overdue invoice",l.overdueCount>1?"s":""," — total"," ",e.jsxs("strong",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(A,{size:10})," ",Number(l.overdueAmount||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),action:e.jsx(I,{size:"small",onClick:()=>i("/invoice"),children:"View"}),style:{borderRadius:8}})}),((ie=o==null?void 0:o.byPriority)==null?void 0:ie.ior)>0&&e.jsx(b,{xs:24,sm:24,md:12,children:e.jsx(U,{type:"warning",showIcon:!0,icon:e.jsx(Te,{}),message:e.jsxs("span",{style:{fontSize:n?12:14},children:[e.jsx("strong",{children:o.byPriority.ior})," IOR priority RFQ",o.byPriority.ior>1?"s":""," need quoting"]}),action:e.jsx(I,{size:"small",onClick:()=>i("/rfq?priority=ior"),children:"View"}),style:{borderRadius:8}})}),l.lastPayroll&&e.jsx(b,{xs:24,sm:24,md:12,children:e.jsx(U,{type:l.lastPayroll.status==="draft"?"warning":"info",showIcon:!0,icon:e.jsx(A,{size:14,color:"#fa8c16"}),message:e.jsxs("span",{style:{fontSize:n?12:14},children:["Payroll ",l.lastPayroll.month,"/",l.lastPayroll.year," is"," ",e.jsx(W,{color:l.lastPayroll.status==="approved"?"green":l.lastPayroll.status==="paid"?"blue":"orange",style:{marginLeft:4},children:(ne=l.lastPayroll.status)==null?void 0:ne.toUpperCase()})]}),action:e.jsx(I,{size:"small",onClick:()=>i("/payroll"),children:"View"}),style:{borderRadius:8}})})]})]}),w&&w.length>0&&e.jsx("div",{style:{marginBottom:n?12:20},children:e.jsx(U,{type:"warning",showIcon:!0,icon:e.jsx(ze,{}),message:e.jsxs("span",{style:{fontSize:n?12:14},children:[e.jsx("strong",{children:w.length})," inventory item",w.length>1?"s":""," need",w.length===1?"s":""," reordering",w.filter(s=>s.severity==="critical").length>0&&e.jsxs(W,{color:"red",style:{marginLeft:8},children:[w.filter(s=>s.severity==="critical").length," out of stock"]})]}),action:e.jsx(I,{size:"small",onClick:()=>i("/inventory/reorder-alerts"),children:"View Alerts"}),style:{borderRadius:8}})}),_e&&e.jsx("div",{style:{marginBottom:n?12:20},children:e.jsxs(R,{style:{borderRadius:10,borderLeft:"4px solid #faad14"},bodyStyle:{padding:n?"12px 14px":"16px 20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10,flexWrap:n?"wrap":"nowrap",gap:8},children:[e.jsxs(v,{level:5,style:{margin:0,color:"#034D57",fontSize:n?13:16},children:["Setup Checklist — ",Y,"/",J," complete"]}),e.jsx(rt,{type:"circle",size:n?36:44,percent:Math.round(Y/J*100),strokeColor:"#4CB480",format:s=>e.jsxs("span",{style:{fontSize:n?10:12,fontWeight:700},children:[s,"%"]})})]}),e.jsx(E,{done:y.clients>0,label:"Add clients/customers",action:"Add client",path:"/customer",navigate:i}),e.jsx(E,{done:y.products>0,label:"Add products & services catalog",action:"Add products",path:"/products",navigate:i}),e.jsx(E,{done:y.employees>0,label:"Add employees with salary details",action:"Add employees",path:"/employees",navigate:i}),e.jsx(E,{done:y.bankAccounts>0,label:"Configure bank accounts",action:"Add bank account",path:"/bank-accounts",navigate:i})]})}),e.jsxs("div",{style:{marginBottom:n?12:20},children:[e.jsx(v,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:n?11:12,letterSpacing:1.5,marginBottom:12},children:"Quick Actions"}),e.jsx(k,{gutter:[8,8],children:[{label:"New Quote",icon:e.jsx(Ce,{}),color:"#034D57",path:"/quote/create"},{label:"New Invoice",icon:e.jsx(we,{}),color:"#4CB480",path:"/invoice/create"},{label:"New PO",icon:e.jsx(De,{}),color:"#722ed1",path:"/purchase-order/create"},{label:"View RFQs",icon:e.jsx(K,{}),color:"#1890ff",path:"/rfq"},{label:"Opportunities",icon:e.jsx(ke,{}),color:"#fa8c16",path:"/opportunities"},{label:"Add Employee",icon:e.jsx(Pe,{}),color:"#52c41a",path:"/employees"}].map(s=>e.jsx(b,{xs:12,sm:8,md:4,children:e.jsx(I,{block:!0,icon:s.icon,onClick:()=>i(s.path),style:{height:n?42:52,borderRadius:8,borderColor:s.color,color:s.color,fontWeight:600,fontSize:n?11:13},children:s.label})},s.label))})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(v,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:n?11:12,letterSpacing:1.5,marginBottom:12},children:"Procurement"}),e.jsxs(k,{gutter:[8,8],children:[e.jsx(f,{icon:e.jsx(K,{}),label:"Total RFQs",value:o==null?void 0:o.total,color:"#034D57",loading:a,onClick:()=>i("/rfq")}),e.jsx(f,{icon:e.jsx(Ke,{}),label:"Active",value:o==null?void 0:o.active,color:"#1890ff",subtitle:"open RFQs",loading:a,onClick:()=>i("/rfq?status=new,in_progress,researched")}),e.jsx(f,{icon:e.jsx(Te,{}),label:"IOR",value:(le=o==null?void 0:o.byPriority)==null?void 0:le.ior,color:"#ff4d4f",subtitle:"priority",loading:a,onClick:()=>i("/rfq?priority=ior")}),e.jsx(f,{icon:e.jsx(X,{}),label:"Quoted",value:(re=o==null?void 0:o.byStatus)==null?void 0:re.quoted,color:"#52c41a",loading:a,onClick:()=>i("/rfq?status=quoted")}),e.jsx(f,{icon:e.jsx(Be,{}),label:"Suppliers",value:o==null?void 0:o.totalVendors,color:"#4CB480",loading:a,onClick:()=>i("/suppliers")}),e.jsx(f,{icon:e.jsx(De,{}),label:"Parts",value:o==null?void 0:o.totalParts,color:"#722ed1",loading:a,onClick:()=>i("/parts")}),e.jsx(f,{icon:e.jsx(ke,{}),label:"Opportunities",value:(c==null?void 0:c.total)??"—",color:"#fa8c16",subtitle:c!=null&&c.highPriority?`${c.highPriority} high priority`:void 0,loading:!1,onClick:()=>i("/opportunities")})]})]}),e.jsx("div",{className:"space20"}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(v,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:n?11:12,letterSpacing:1.5,marginBottom:12},children:"Financial Summary"}),e.jsxs(k,{gutter:[8,8],children:[e.jsx(B,{title:"Invoices This Month",value:T==null?void 0:T.total,loading:te,color:"#034D57",subtitle:"billed"}),e.jsx(B,{title:"Quotes This Month",value:H==null?void 0:H.total,loading:$e,color:"#1890ff",subtitle:"proposed"}),e.jsx(B,{title:"Received Payments",value:G==null?void 0:G.total,loading:We,color:"#52c41a",subtitle:"this month"}),e.jsx(B,{title:"Unpaid Balance",value:T==null?void 0:T.total_undue,loading:te,color:"#ff4d4f",subtitle:"outstanding"})]})]}),e.jsx("div",{className:"space20"}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(v,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:n?11:12,letterSpacing:1.5,marginBottom:12},children:"HR & Payroll"}),e.jsxs(k,{gutter:[8,8],children:[e.jsx(f,{icon:e.jsx(Be,{}),label:"Total Staff",value:(h==null?void 0:h.total)??0,color:"#034D57",onClick:()=>i("/employees")}),e.jsx(f,{icon:e.jsx(X,{}),label:"Active",value:(h==null?void 0:h.active)??0,color:"#52c41a",subtitle:"employees",onClick:()=>i("/employees")}),e.jsx(f,{icon:e.jsx(Pe,{}),label:"Departments",value:((ae=h==null?void 0:h.byDept)==null?void 0:ae.length)??0,color:"#722ed1",subtitle:"active",onClick:()=>i("/employees")}),e.jsx(b,{xs:12,sm:12,md:6,lg:4,children:e.jsxs(R,{bodyStyle:{padding:"14px 12px",textAlign:"center"},style:{borderRadius:10,border:"1px solid #fa8c1622",cursor:"pointer"},hoverable:!0,onClick:()=>i("/payroll"),children:[e.jsx("div",{style:{fontSize:24,color:"#fa8c16",marginBottom:4},children:e.jsx(A,{size:24,color:"#fa8c16"})}),e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#034D57"},children:l!=null&&l.lastPayroll?e.jsxs(W,{color:l.lastPayroll.status==="paid"?"blue":"orange",children:[l.lastPayroll.month,"/",l.lastPayroll.year," — ",(ce=l.lastPayroll.status)==null?void 0:ce.toUpperCase()]}):e.jsx("span",{style:{color:"#aaa",fontSize:12},children:"No runs yet"})}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:4},children:"Payroll"})]})}),e.jsx(f,{icon:e.jsx(ze,{}),label:"Attendance",value:((de=h==null?void 0:h.today)==null?void 0:de.present)??0,color:"#1890ff",subtitle:"present today",onClick:()=>i("/attendance")})]})]}),e.jsx("div",{className:"space20"}),C&&e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(v,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:n?11:12,letterSpacing:1.5,marginBottom:12},children:"Business Health"}),e.jsxs(k,{gutter:[8,8],children:[e.jsx(B,{title:"AP Due (Vendor Bills)",value:C.apDue,color:"#e53e3e",subtitle:"total accounts payable"}),e.jsx(B,{title:"Expenses (MTD)",value:C.expTotal,color:"#fa8c16",subtitle:"month-to-date"}),e.jsx(B,{title:"Bank Balance (OMR)",value:C.bankBal,color:"#4CB480",subtitle:"OMR accounts only"}),e.jsx(b,{xs:12,sm:12,md:6,lg:6,children:e.jsxs(R,{style:{borderRadius:10,borderLeft:"3px solid #1890ff",cursor:"pointer"},bodyStyle:{padding:"14px 16px"},onClick:()=>i("/projects?status=active"),children:[e.jsx("div",{style:{fontSize:12,color:"#888",fontWeight:600,marginBottom:6},children:"Active Projects"}),e.jsx("div",{style:{fontSize:28,fontWeight:800,color:"#1890ff"},children:C.activeProj}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:"click to view"})]})})]})]}),e.jsx("div",{className:"space30"}),j&&!ee&&(((ue=j.newRfqs)==null?void 0:ue.length)>0||((he=j.recentQuotes)==null?void 0:he.length)>0||((pe=j.recentInvoices)==null?void 0:pe.length)>0)&&e.jsxs("div",{style:{marginBottom:n?16:30},children:[e.jsx(v,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:n?11:12,letterSpacing:1.5,marginBottom:12},children:"Recent Activity (Last 7 Days)"}),e.jsx(R,{style:{borderRadius:10},bodyStyle:{padding:n?"12px":"20px"},children:ee?e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx(q,{})}):e.jsxs(_,{mode:"left",children:[(xe=j.newRfqs)==null?void 0:xe.slice(0,5).map(s=>e.jsx(_.Item,{dot:e.jsx(K,{style:{fontSize:14,color:"#034D57"}}),color:"#034D57",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>i(`/rfq/${s._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#034D57"},children:["RFQ #",s.rfqNumber," received",s.priority==="ior"&&e.jsx(W,{color:"red",style:{marginLeft:6,fontSize:10},children:"IOR"})]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:2},children:s.subject||s.client||"No subject"}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(s.receivedAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`rfq-${s._id}`)),(me=j.recentQuotes)==null?void 0:me.slice(0,3).map(s=>{var z;return e.jsx(_.Item,{dot:e.jsx(Ce,{style:{fontSize:14,color:"#1890ff"}}),color:"#1890ff",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>i(`/quote/${s._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#1890ff"},children:["Quote #",s.number,"/",s.year," created"]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:2},children:[((z=s.client)==null?void 0:z.name)||"No client"," —"," ",e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(A,{size:9}),Number(s.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(s.date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`quote-${s._id}`)}),(ye=j.recentInvoices)==null?void 0:ye.slice(0,3).map(s=>{var z;return e.jsx(_.Item,{dot:e.jsx(we,{style:{fontSize:14,color:"#52c41a"}}),color:"#52c41a",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>i(`/invoice/${s._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#52c41a"},children:["Invoice #",s.number,"/",s.year," created"]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:2},children:[((z=s.client)==null?void 0:z.name)||"No client"," —"," ",e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(A,{size:9}),Number(s.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(s.date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`invoice-${s._id}`)})]})})]}),e.jsxs(k,{gutter:[n?8:16,n?8:16],children:[e.jsx(b,{xs:24,lg:12,children:e.jsxs("div",{className:"whiteBox shadow",style:{borderRadius:8,padding:n?"12px":"20px"},children:[e.jsx(v,{level:5,style:{color:"#034D57",marginBottom:12,fontSize:n?14:16},children:"Recent Invoices"}),e.jsx(Oe,{entity:"invoice",dataTableColumns:se})]})}),e.jsx(b,{xs:24,lg:12,children:e.jsxs("div",{className:"whiteBox shadow",style:{borderRadius:8,padding:n?"12px":"20px"},children:[e.jsx(v,{level:5,style:{color:"#034D57",marginBottom:12,fontSize:n?14:16},children:"Recent Quotes"}),e.jsx(Oe,{entity:"quote",dataTableColumns:se})]})})]})]})}function Pt(){return e.jsx(ut,{})}export{Pt as default};
