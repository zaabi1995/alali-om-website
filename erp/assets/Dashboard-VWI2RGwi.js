import{r as x,j as e,m as Ee,n as st,u as ot}from"./index-BJn_oD1P.js";import"./currency.es-9OAR_aOO.js";import{F as nt,D as it,E as lt,s as rt,O as D,T as $,I as Oe,C as te,a as Le,b as Pe,S as Fe,c as X,B as Ne,d as at,e as Me}from"./ErpApp-D8KMIIKs.js";import{O as ct,g as dt,b4 as ut,b5 as ht,aU as pt,b6 as xt,aZ as Qe,aV as h,b7 as q,aM as w,aL as y,aB as F,aN as oe,aY as mt}from"./IdurarOs-B9KFkIUP.js";import{u as ft}from"./useFetch-CJUgm053.js";import{e as $e}from"./actions-BTh9aIOf.js";import{F as gt}from"./Table-BxS9KpKR.js";import{A as E}from"./index-CViL20AZ.js";import{W as We}from"./WarningOutlined-H_3LjplR.js";import{A as ee}from"./AlertOutlined-ChXBxJNz.js";import{C as T}from"./index-FeqLAMca.js";import{P as yt}from"./progress-C9RbWdyC.js";import{C as se}from"./CheckCircleOutlined-B06rKH1F.js";import{T as Q}from"./Timeline-WOcJ7R7U.js";import"./Skeleton-CxF7GD-W.js";import"./index-DRV5_-om.js";import"./PlusOutlined-XHDMkaJO.js";var jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},bt=function(r,o){return x.createElement(ct,dt({},r,{ref:o,icon:jt}))};const _e=x.forwardRef(bt);function Ue({...n}){const r=pt();let{entity:o,dataTableColumns:f}=n;const c=[{label:r("Show"),key:"read",icon:e.jsx(ut,{})},{label:r("Edit"),key:"edit",icon:e.jsx(ht,{})},{label:r("Download"),key:"download",icon:e.jsx(nt,{})}],g=Ee(),d=st(),C=b=>{d($e.currentItem({data:b})),g(`/${o}/read/${b._id}`)},B=b=>{d($e.currentAction({actionType:"update",data:b})),g(`/${o}/update/${b._id}`)},H=b=>{window.open(`${xt}${o}/${o}-${b._id}.pdf`,"_blank")};f=[...f,{title:"",key:"action",render:(b,v)=>e.jsx(it,{menu:{items:c,onClick:({key:N})=>{switch(N){case"read":C(v);break;case"edit":B(v);break;case"download":H(v);break}}},trigger:["click"],children:e.jsx(lt,{style:{cursor:"pointer",fontSize:"24px"},onClick:N=>N.preventDefault()})})}];const m=()=>Qe.list({entity:o}),{result:W,isLoading:j,isSuccess:_}=ft(m),l=()=>_&&W?W.slice(0,5):[];return e.jsx(gt,{columns:f,rowKey:b=>b._id,dataSource:_&&l(),pagination:!1,loading:j,scroll:{x:!0}})}const{Title:S,Text:$t}=mt;function p(){return{Authorization:`Bearer ${((JSON.parse(localStorage.getItem("auth"))||{}).current||{}).token}`}}function z({icon:n,label:r,value:o,color:f,subtitle:c,loading:g,onClick:d}){const C=window.innerWidth<768;return e.jsx(y,{xs:12,sm:8,md:6,lg:4,children:e.jsxs(T,{onClick:d,style:{borderRadius:10,border:`1px solid ${f}22`,cursor:d?"pointer":"default",transition:"box-shadow 0.2s"},bodyStyle:{padding:C?"10px 8px":"14px 12px",textAlign:"center"},hoverable:!!d,children:[e.jsx("div",{style:{fontSize:C?18:24,color:f,marginBottom:4},children:n}),g?e.jsx(oe,{size:"small"}):e.jsx("div",{style:{fontSize:C?18:24,fontWeight:800,color:"#034D57",lineHeight:1},children:(o==null?void 0:o.toLocaleString())??"—"}),e.jsx("div",{style:{fontSize:C?10:12,color:"#555",marginTop:3,fontWeight:600},children:r}),c&&e.jsx("div",{style:{fontSize:C?9:11,color:"#aaa",marginTop:1},children:c})]})})}function I({title:n,value:r,subtitle:o,loading:f,color:c="#034D57"}){const g=window.innerWidth<768,d=!f&&r!==void 0?Number(r||0).toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}):null;return e.jsx(y,{xs:24,sm:12,md:6,lg:6,children:e.jsxs(T,{style:{borderRadius:10,borderLeft:`3px solid ${c}`},bodyStyle:{padding:g?"10px 12px":"14px 16px"},children:[e.jsx("div",{style:{fontSize:g?10:12,color:"#888",fontWeight:600,marginBottom:6},children:n}),f?e.jsx(oe,{size:"small"}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:g?5:7},children:[e.jsx(D,{size:g?12:14,style:{filter:"brightness(0) saturate(100%) invert(20%) sepia(60%) saturate(400%) hue-rotate(160deg)"}}),e.jsx("span",{style:{fontSize:g?16:20,fontWeight:800,color:c,fontVariantNumeric:"tabular-nums"},children:d??"0.000"})]}),e.jsx("div",{style:{fontSize:g?9:11,color:"#aaa",marginTop:2},children:o})]})})}function V({done:n,label:r,action:o,path:f,navigate:c}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"6px 0",borderBottom:"1px solid #f0f0f0"},children:[n?e.jsx(se,{style:{color:"#52c41a",fontSize:16}}):e.jsx(te,{style:{color:"#faad14",fontSize:16}}),e.jsx("span",{style:{flex:1,fontSize:13,color:n?"#888":"#333",textDecoration:n?"line-through":"none"},children:r}),!n&&e.jsxs(F,{size:"small",type:"link",style:{color:"#034D57",padding:0},onClick:()=>c(f),children:[o," →"]})]})}function vt(){var re,ae,ce,de,ue,he,pe,xe,me,fe,ge,ye,je,be,ve,Se,ze,ke,Ce,De;const n=Ee(),r=ot(rt),[o,f]=x.useState(null),[c,g]=x.useState(!0),[d,C]=x.useState(null),[B,H]=x.useState(null),[m,W]=x.useState(null),[j,_]=x.useState(null),[l,b]=x.useState(null),[v,N]=x.useState(null),[ne,Ve]=x.useState(!0),[R,He]=x.useState(null),[k,Ge]=x.useState(null),[Ye,Je]=x.useState(!0);x.useEffect(()=>{fetch(h+"rfq/stats",{headers:p()}).then(s=>s.json()).then(s=>{s.success&&f(s.result)}).catch(()=>{}).finally(()=>g(!1)),fetch(h+"opportunity/stats",{headers:p()}).then(s=>s.json()).then(s=>{s.success&&C(s.result)}).catch(()=>{}),fetch(h+"employee/stats",{headers:p()}).then(s=>s.json()).then(s=>{s.success&&W(s.result)}).catch(()=>{});const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],u=new Date().toISOString().split("T")[0];Promise.all([fetch(h+"vendorbill/ap-summary",{headers:p()}).then(s=>s.json()).catch(()=>({})),fetch(h+`expense/summary?from=${a}&to=${u}`,{headers:p()}).then(s=>s.json()).catch(()=>({})),fetch(h+"bankaccount/list",{headers:p()}).then(s=>s.json()).catch(()=>({})),fetch(h+"project/list?status=active",{headers:p()}).then(s=>s.json()).catch(()=>({}))]).then(([s,L,P,A])=>{H({apDue:s.grandTotal||0,expTotal:L.grandTotal||0,bankBal:(P.result||[]).reduce((U,M)=>U+(M.currency==="OMR"&&M.currentBalance||0),0),activeProj:(A.result||[]).length})}).catch(()=>{}),Promise.all([fetch(h+"employee/list?items=1",{headers:p()}).then(s=>s.json()).catch(()=>({})),fetch(h+"product/list?items=1",{headers:p()}).then(s=>s.json()).catch(()=>({})),fetch(h+"bankaccount/list?items=1",{headers:p()}).then(s=>s.json()).catch(()=>({})),fetch(h+"client/list?items=1",{headers:p()}).then(s=>s.json()).catch(()=>({}))]).then(([s,L,P,A])=>{var U,M,Te,we,Be,Re,Ae,Ie;_({employees:((U=s.pagination)==null?void 0:U.count)||((M=s.result)==null?void 0:M.length)||0,products:((Te=L.pagination)==null?void 0:Te.count)||((we=L.result)==null?void 0:we.length)||0,bankAccounts:((Be=P.pagination)==null?void 0:Be.count)||((Re=P.result)==null?void 0:Re.length)||0,clients:((Ae=A.pagination)==null?void 0:Ae.count)||((Ie=A.result)==null?void 0:Ie.length)||0})}).catch(()=>{}),Promise.all([fetch(h+"reports/overdue",{headers:p()}).then(s=>s.json()).catch(()=>({})),fetch(h+"payrollrun/list?items=1",{headers:p()}).then(s=>s.json()).catch(()=>({}))]).then(([s,L])=>{b({overdueCount:(s.result||[]).length,overdueAmount:(s.result||[]).reduce((P,A)=>P+(A.total-(A.totalPaid||0)),0),lastPayroll:(L.result||[])[0]||null})}).catch(()=>{}),fetch(h+"rfq/recent-activity",{headers:p()}).then(s=>s.json()).then(s=>{s.success&&N(s.result)}).catch(()=>{}).finally(()=>Ve(!1)),fetch(h+"inventoryitem/reorder-alerts",{headers:p()}).then(s=>s.json()).then(s=>{s.success&&He(s.result||[])}).catch(()=>{}),fetch(h+"dashboard/my-tasks",{headers:p()}).then(s=>s.json()).then(s=>{s.success&&Ge(s.result)}).catch(()=>{}).finally(()=>Je(!1))},[]);const G=async({entity:t,currency:a})=>Qe.summary({entity:t,options:{currency:a}}),{result:O,isLoading:ie,onFetch:Ke}=q(),{result:Y,isLoading:Ze,onFetch:Xe}=q(),{result:J,isLoading:qe,onFetch:et}=q();x.useEffect(()=>{const t=(r==null?void 0:r.default_currency_code)||"OMR";Ke(G({entity:"invoice",currency:t})),Xe(G({entity:"quote",currency:t})),et(G({entity:"payment",currency:t}))},[r==null?void 0:r.default_currency_code]);const le=[{title:"#",dataIndex:"number",width:70},{title:"Client",dataIndex:["client","name"],ellipsis:!0},{title:"Total",dataIndex:"total",align:"right",render:t=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:12},children:[e.jsx(D,{size:10}),Number(t||0).toLocaleString("en-US",{minimumFractionDigits:3})]})},{title:"Status",dataIndex:"status",width:90,render:t=>e.jsx("span",{style:{fontSize:12,textTransform:"capitalize"},children:t})}];if(!r)return null;const K=j?[j.employees>0,j.products>0,j.bankAccounts>0,j.clients>0].filter(Boolean).length:0,Z=4,tt=j&&K<Z,i=window.innerWidth<768;return e.jsxs("div",{style:{padding:i?"8px":"16px"},children:[l&&(l.overdueCount>0||((re=o==null?void 0:o.byPriority)==null?void 0:re.ior)>0)&&e.jsxs("div",{style:{marginBottom:i?12:20},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:10},children:"Today at a Glance"}),e.jsxs(w,{gutter:[8,8],children:[l.overdueCount>0&&e.jsx(y,{xs:24,sm:24,md:12,children:e.jsx(E,{type:"error",showIcon:!0,icon:e.jsx(We,{}),message:e.jsxs("span",{style:{fontSize:i?12:14},children:[e.jsx("strong",{children:l.overdueCount})," overdue invoice",l.overdueCount>1?"s":""," — total"," ",e.jsxs("strong",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(D,{size:10})," ",Number(l.overdueAmount||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),action:e.jsx(F,{size:"small",onClick:()=>n("/invoice"),children:"View"}),style:{borderRadius:8}})}),((ae=o==null?void 0:o.byPriority)==null?void 0:ae.ior)>0&&e.jsx(y,{xs:24,sm:24,md:12,children:e.jsx(E,{type:"warning",showIcon:!0,icon:e.jsx(ee,{}),message:e.jsxs("span",{style:{fontSize:i?12:14},children:[e.jsx("strong",{children:o.byPriority.ior})," IOR priority RFQ",o.byPriority.ior>1?"s":""," need quoting"]}),action:e.jsx(F,{size:"small",onClick:()=>n("/rfq?priority=ior"),children:"View"}),style:{borderRadius:8}})}),l.lastPayroll&&e.jsx(y,{xs:24,sm:24,md:12,children:e.jsx(E,{type:l.lastPayroll.status==="draft"?"warning":"info",showIcon:!0,icon:e.jsx(D,{size:14,color:"#fa8c16"}),message:e.jsxs("span",{style:{fontSize:i?12:14},children:["Payroll ",l.lastPayroll.month,"/",l.lastPayroll.year," is"," ",e.jsx($,{color:l.lastPayroll.status==="approved"?"green":l.lastPayroll.status==="paid"?"blue":"orange",style:{marginLeft:4},children:(ce=l.lastPayroll.status)==null?void 0:ce.toUpperCase()})]}),action:e.jsx(F,{size:"small",onClick:()=>n("/payroll"),children:"View"}),style:{borderRadius:8}})})]})]}),R&&R.length>0&&e.jsx("div",{style:{marginBottom:i?12:20},children:e.jsx(E,{type:"warning",showIcon:!0,icon:e.jsx(Oe,{}),message:e.jsxs("span",{style:{fontSize:i?12:14},children:[e.jsx("strong",{children:R.length})," inventory item",R.length>1?"s":""," need",R.length===1?"s":""," reordering",R.filter(t=>t.severity==="critical").length>0&&e.jsxs($,{color:"red",style:{marginLeft:8},children:[R.filter(t=>t.severity==="critical").length," out of stock"]})]}),action:e.jsx(F,{size:"small",onClick:()=>n("/inventory/reorder-alerts"),children:"View Alerts"}),style:{borderRadius:8}})}),!Ye&&k&&(((de=k.upcomingRfqs)==null?void 0:de.length)>0||((ue=k.pendingApprovals)==null?void 0:ue.length)>0||((he=k.overdueInvoices)==null?void 0:he.length)>0)&&e.jsxs("div",{style:{marginBottom:i?12:20},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:12},children:"My Tasks"}),e.jsxs(w,{gutter:[8,8],children:[((pe=k.upcomingRfqs)==null?void 0:pe.length)>0&&e.jsx(y,{xs:24,sm:24,md:8,children:e.jsx(T,{title:e.jsxs("span",{style:{fontSize:13,color:"#034D57",fontWeight:600},children:[e.jsx(te,{style:{marginRight:6}}),"Upcoming RFQ Deadlines"]}),bordered:!1,style:{borderRadius:10,borderTop:"3px solid #034D57"},bodyStyle:{padding:i?10:14},children:k.upcomingRfqs.map(t=>{const a=Math.ceil((new Date(t.deadline)-new Date)/864e5);return e.jsxs("div",{onClick:()=>n(`/rfq/${t._id}`),style:{padding:"8px 10px",marginBottom:8,borderRadius:6,border:"1px solid #f0f0f0",cursor:"pointer",transition:"all 0.2s",background:"#fafafa"},onMouseEnter:u=>{u.currentTarget.style.background="#f0f9ff",u.currentTarget.style.borderColor="#034D57"},onMouseLeave:u=>{u.currentTarget.style.background="#fafafa",u.currentTarget.style.borderColor="#f0f0f0"},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#034D57",marginBottom:4},children:["RFQ #",t.rfqNumber,t.priority==="ior"&&e.jsx($,{color:"red",style:{marginLeft:6,fontSize:10},children:"IOR"})]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:t.subject||t.client||"No subject"}),e.jsxs("div",{style:{fontSize:11,color:a<=1?"#ff4d4f":"#fa8c16"},children:[e.jsx(te,{style:{marginRight:4}}),a===0?"Due today":a===1?"Due tomorrow":`${a} days left`]})]},t._id)})})}),((xe=k.pendingApprovals)==null?void 0:xe.length)>0&&e.jsx(y,{xs:24,sm:24,md:8,children:e.jsx(T,{title:e.jsxs("span",{style:{fontSize:13,color:"#fa8c16",fontWeight:600},children:[e.jsx(ee,{style:{marginRight:6}}),"Pending Approvals"]}),bordered:!1,style:{borderRadius:10,borderTop:"3px solid #fa8c16"},bodyStyle:{padding:i?10:14},children:k.pendingApprovals.map(t=>{var a;return e.jsxs("div",{onClick:()=>n(`/quote/${t._id}`),style:{padding:"8px 10px",marginBottom:8,borderRadius:6,border:"1px solid #f0f0f0",cursor:"pointer",transition:"all 0.2s",background:"#fafafa"},onMouseEnter:u=>{u.currentTarget.style.background="#fff7e6",u.currentTarget.style.borderColor="#fa8c16"},onMouseLeave:u=>{u.currentTarget.style.background="#fafafa",u.currentTarget.style.borderColor="#f0f0f0"},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#fa8c16",marginBottom:4},children:["Quote #",t.number,"/",t.year]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:((a=t.client)==null?void 0:a.name)||"No client"}),e.jsxs("div",{style:{fontSize:11,color:"#888",display:"flex",alignItems:"center",gap:4},children:[e.jsx(D,{size:9}),Number(t.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]},t._id)})})}),((me=k.overdueInvoices)==null?void 0:me.length)>0&&e.jsx(y,{xs:24,sm:24,md:8,children:e.jsx(T,{title:e.jsxs("span",{style:{fontSize:13,color:"#ff4d4f",fontWeight:600},children:[e.jsx(We,{style:{marginRight:6}}),"Overdue Invoices"]}),bordered:!1,style:{borderRadius:10,borderTop:"3px solid #ff4d4f"},bodyStyle:{padding:i?10:14},children:k.overdueInvoices.map(t=>{var u;const a=Math.ceil((new Date-new Date(t.expiredDate))/864e5);return e.jsxs("div",{onClick:()=>n(`/invoice/${t._id}`),style:{padding:"8px 10px",marginBottom:8,borderRadius:6,border:"1px solid #f0f0f0",cursor:"pointer",transition:"all 0.2s",background:"#fafafa"},onMouseEnter:s=>{s.currentTarget.style.background="#fff1f0",s.currentTarget.style.borderColor="#ff4d4f"},onMouseLeave:s=>{s.currentTarget.style.background="#fafafa",s.currentTarget.style.borderColor="#f0f0f0"},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#ff4d4f",marginBottom:4},children:["Invoice #",t.number,"/",t.year]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginBottom:4},children:((u=t.client)==null?void 0:u.name)||"No client"}),e.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:2,display:"flex",alignItems:"center",gap:4},children:[e.jsx(D,{size:9}),Number(t.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]}),e.jsxs("div",{style:{fontSize:11,color:"#ff4d4f"},children:[a," day",a>1?"s":""," overdue"]})]},t._id)})})})]})]}),tt&&e.jsx("div",{style:{marginBottom:i?12:20},children:e.jsxs(T,{style:{borderRadius:10,borderLeft:"4px solid #faad14"},bodyStyle:{padding:i?"12px 14px":"16px 20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10,flexWrap:i?"wrap":"nowrap",gap:8},children:[e.jsxs(S,{level:5,style:{margin:0,color:"#034D57",fontSize:i?13:16},children:["Setup Checklist — ",K,"/",Z," complete"]}),e.jsx(yt,{type:"circle",size:i?36:44,percent:Math.round(K/Z*100),strokeColor:"#4CB480",format:t=>e.jsxs("span",{style:{fontSize:i?10:12,fontWeight:700},children:[t,"%"]})})]}),e.jsx(V,{done:j.clients>0,label:"Add clients/customers",action:"Add client",path:"/customer",navigate:n}),e.jsx(V,{done:j.products>0,label:"Add products & services catalog",action:"Add products",path:"/products",navigate:n}),e.jsx(V,{done:j.employees>0,label:"Add employees with salary details",action:"Add employees",path:"/employees",navigate:n}),e.jsx(V,{done:j.bankAccounts>0,label:"Configure bank accounts",action:"Add bank account",path:"/bank-accounts",navigate:n})]})}),e.jsxs("div",{style:{marginBottom:i?12:20},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:12},children:"Quick Actions"}),e.jsx(w,{gutter:[8,8],children:[{label:"New Quote",icon:e.jsx(Le,{}),color:"#034D57",path:"/quote/create"},{label:"New Invoice",icon:e.jsx(Pe,{}),color:"#4CB480",path:"/invoice/create"},{label:"New PO",icon:e.jsx(Fe,{}),color:"#722ed1",path:"/purchase-order/create"},{label:"View RFQs",icon:e.jsx(X,{}),color:"#1890ff",path:"/rfq"},{label:"Opportunities",icon:e.jsx(Ne,{}),color:"#fa8c16",path:"/opportunities"},{label:"Add Employee",icon:e.jsx(_e,{}),color:"#52c41a",path:"/employees"}].map(t=>e.jsx(y,{xs:12,sm:8,md:4,children:e.jsx(F,{block:!0,icon:t.icon,onClick:()=>n(t.path),style:{height:i?42:52,borderRadius:8,borderColor:t.color,color:t.color,fontWeight:600,fontSize:i?11:13},children:t.label})},t.label))})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:12},children:"Procurement"}),e.jsxs(w,{gutter:[8,8],children:[e.jsx(z,{icon:e.jsx(X,{}),label:"Total RFQs",value:o==null?void 0:o.total,color:"#034D57",loading:c,onClick:()=>n("/rfq")}),e.jsx(z,{icon:e.jsx(at,{}),label:"Active",value:o==null?void 0:o.active,color:"#1890ff",subtitle:"open RFQs",loading:c,onClick:()=>n("/rfq?status=new,in_progress,researched")}),e.jsx(z,{icon:e.jsx(ee,{}),label:"IOR",value:(fe=o==null?void 0:o.byPriority)==null?void 0:fe.ior,color:"#ff4d4f",subtitle:"priority",loading:c,onClick:()=>n("/rfq?priority=ior")}),e.jsx(z,{icon:e.jsx(se,{}),label:"Quoted",value:(ge=o==null?void 0:o.byStatus)==null?void 0:ge.quoted,color:"#52c41a",loading:c,onClick:()=>n("/rfq?status=quoted")}),e.jsx(z,{icon:e.jsx(Me,{}),label:"Suppliers",value:o==null?void 0:o.totalVendors,color:"#4CB480",loading:c,onClick:()=>n("/suppliers")}),e.jsx(z,{icon:e.jsx(Fe,{}),label:"Parts",value:o==null?void 0:o.totalParts,color:"#722ed1",loading:c,onClick:()=>n("/parts")}),e.jsx(z,{icon:e.jsx(Ne,{}),label:"Opportunities",value:(d==null?void 0:d.total)??"—",color:"#fa8c16",subtitle:d!=null&&d.highPriority?`${d.highPriority} high priority`:void 0,loading:!1,onClick:()=>n("/opportunities")})]})]}),e.jsx("div",{className:"space20"}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:12},children:"Financial Summary"}),e.jsxs(w,{gutter:[8,8],children:[e.jsx(I,{title:"Invoices This Month",value:O==null?void 0:O.total,loading:ie,color:"#034D57",subtitle:"billed"}),e.jsx(I,{title:"Quotes This Month",value:Y==null?void 0:Y.total,loading:Ze,color:"#1890ff",subtitle:"proposed"}),e.jsx(I,{title:"Received Payments",value:J==null?void 0:J.total,loading:qe,color:"#52c41a",subtitle:"this month"}),e.jsx(I,{title:"Unpaid Balance",value:O==null?void 0:O.total_undue,loading:ie,color:"#ff4d4f",subtitle:"outstanding"})]})]}),e.jsx("div",{className:"space20"}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:12},children:"HR & Payroll"}),e.jsxs(w,{gutter:[8,8],children:[e.jsx(z,{icon:e.jsx(Me,{}),label:"Total Staff",value:(m==null?void 0:m.total)??0,color:"#034D57",onClick:()=>n("/employees")}),e.jsx(z,{icon:e.jsx(se,{}),label:"Active",value:(m==null?void 0:m.active)??0,color:"#52c41a",subtitle:"employees",onClick:()=>n("/employees")}),e.jsx(z,{icon:e.jsx(_e,{}),label:"Departments",value:((ye=m==null?void 0:m.byDept)==null?void 0:ye.length)??0,color:"#722ed1",subtitle:"active",onClick:()=>n("/employees")}),e.jsx(y,{xs:12,sm:12,md:6,lg:4,children:e.jsxs(T,{bodyStyle:{padding:"14px 12px",textAlign:"center"},style:{borderRadius:10,border:"1px solid #fa8c1622",cursor:"pointer"},hoverable:!0,onClick:()=>n("/payroll"),children:[e.jsx("div",{style:{fontSize:24,color:"#fa8c16",marginBottom:4},children:e.jsx(D,{size:24,color:"#fa8c16"})}),e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#034D57"},children:l!=null&&l.lastPayroll?e.jsxs($,{color:l.lastPayroll.status==="paid"?"blue":"orange",children:[l.lastPayroll.month,"/",l.lastPayroll.year," — ",(je=l.lastPayroll.status)==null?void 0:je.toUpperCase()]}):e.jsx("span",{style:{color:"#aaa",fontSize:12},children:"No runs yet"})}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:4},children:"Payroll"})]})}),e.jsx(z,{icon:e.jsx(Oe,{}),label:"Attendance",value:((be=m==null?void 0:m.today)==null?void 0:be.present)??0,color:"#1890ff",subtitle:"present today",onClick:()=>n("/attendance")})]})]}),e.jsx("div",{className:"space20"}),B&&e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:12},children:"Business Health"}),e.jsxs(w,{gutter:[8,8],children:[e.jsx(I,{title:"AP Due (Vendor Bills)",value:B.apDue,color:"#e53e3e",subtitle:"total accounts payable"}),e.jsx(I,{title:"Expenses (MTD)",value:B.expTotal,color:"#fa8c16",subtitle:"month-to-date"}),e.jsx(I,{title:"Bank Balance (OMR)",value:B.bankBal,color:"#4CB480",subtitle:"OMR accounts only"}),e.jsx(y,{xs:12,sm:12,md:6,lg:6,children:e.jsxs(T,{style:{borderRadius:10,borderLeft:"3px solid #1890ff",cursor:"pointer"},bodyStyle:{padding:"14px 16px"},onClick:()=>n("/projects?status=active"),children:[e.jsx("div",{style:{fontSize:12,color:"#888",fontWeight:600,marginBottom:6},children:"Active Projects"}),e.jsx("div",{style:{fontSize:28,fontWeight:800,color:"#1890ff"},children:B.activeProj}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:"click to view"})]})})]})]}),e.jsx("div",{className:"space30"}),v&&!ne&&(((ve=v.newRfqs)==null?void 0:ve.length)>0||((Se=v.recentQuotes)==null?void 0:Se.length)>0||((ze=v.recentInvoices)==null?void 0:ze.length)>0)&&e.jsxs("div",{style:{marginBottom:i?16:30},children:[e.jsx(S,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:i?11:12,letterSpacing:1.5,marginBottom:12},children:"Recent Activity (Last 7 Days)"}),e.jsx(T,{style:{borderRadius:10},bodyStyle:{padding:i?"12px":"20px"},children:ne?e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx(oe,{})}):e.jsxs(Q,{mode:"left",children:[(ke=v.newRfqs)==null?void 0:ke.slice(0,5).map(t=>e.jsx(Q.Item,{dot:e.jsx(X,{style:{fontSize:14,color:"#034D57"}}),color:"#034D57",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>n(`/rfq/${t._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#034D57"},children:["RFQ #",t.rfqNumber," received",t.priority==="ior"&&e.jsx($,{color:"red",style:{marginLeft:6,fontSize:10},children:"IOR"})]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:2},children:t.subject||t.client||"No subject"}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(t.receivedAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`rfq-${t._id}`)),(Ce=v.recentQuotes)==null?void 0:Ce.slice(0,3).map(t=>{var a;return e.jsx(Q.Item,{dot:e.jsx(Le,{style:{fontSize:14,color:"#1890ff"}}),color:"#1890ff",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>n(`/quote/${t._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#1890ff"},children:["Quote #",t.number,"/",t.year," created"]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:2},children:[((a=t.client)==null?void 0:a.name)||"No client"," —"," ",e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(D,{size:9}),Number(t.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`quote-${t._id}`)}),(De=v.recentInvoices)==null?void 0:De.slice(0,3).map(t=>{var a;return e.jsx(Q.Item,{dot:e.jsx(Pe,{style:{fontSize:14,color:"#52c41a"}}),color:"#52c41a",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>n(`/invoice/${t._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#52c41a"},children:["Invoice #",t.number,"/",t.year," created"]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:2},children:[((a=t.client)==null?void 0:a.name)||"No client"," —"," ",e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(D,{size:9}),Number(t.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`invoice-${t._id}`)})]})})]}),e.jsxs(w,{gutter:[i?8:16,i?8:16],children:[e.jsx(y,{xs:24,lg:12,children:e.jsxs("div",{className:"whiteBox shadow",style:{borderRadius:8,padding:i?"12px":"20px"},children:[e.jsx(S,{level:5,style:{color:"#034D57",marginBottom:12,fontSize:i?14:16},children:"Recent Invoices"}),e.jsx(Ue,{entity:"invoice",dataTableColumns:le})]})}),e.jsx(y,{xs:24,lg:12,children:e.jsxs("div",{className:"whiteBox shadow",style:{borderRadius:8,padding:i?"12px":"20px"},children:[e.jsx(S,{level:5,style:{color:"#034D57",marginBottom:12,fontSize:i?14:16},children:"Recent Quotes"}),e.jsx(Ue,{entity:"quote",dataTableColumns:le})]})})]})]})}function Wt(){return e.jsx(vt,{})}export{Wt as default};
