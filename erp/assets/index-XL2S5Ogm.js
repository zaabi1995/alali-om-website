import{r as e,m as Z,j as o}from"./index-CB_AWKJY.js";import{aU as _,aZ as $}from"./IdurarOs-20-QWMXR.js";import{u as k}from"./useFetch-DqPufsBm.js";import{s as z}from"./index-KrFx5yLV.js";import{c as B}from"./color-CnuJOIlI.js";import{f as n,T as D}from"./ErpApp-Cy5crc22.js";const Q=({entity:h,displayLabels:x=["name"],outputValue:c="_id",redirectLabel:j="",withRedirect:u=!1,urlToRedirect:L="/",placeholder:S="select",value:t,onChange:i})=>{var d;const p=_(),[v,b]=e.useState([]),[E,m]=e.useState(void 0),O=Z(),R=()=>$.list({entity:h}),{result:U,isLoading:f,isSuccess:l}=k(R);e.useEffect(()=>{l&&b(U)},[l]);const y=s=>x.map(r=>s[r]).join(" ");e.useEffect(()=>{if(t!==void 0){const s=(t==null?void 0:t[c])??t;m(s),i(s)}},[t]);const C=s=>{if(s==="redirectURL")O(L);else{const r=(s==null?void 0:s[c])??s;m(s),i(r)}},T=()=>{const s=[];return v.map(r=>{var g;const q=r[c]??r,A=y(r),I=((g=r[c])==null?void 0:g.color)??(r==null?void 0:r.color),a=B.find(N=>N.color===I);s.push({value:q,label:A,color:a==null?void 0:a.color})}),s};return o.jsxs(n,{loading:f,disabled:f,value:E,onChange:C,placeholder:S,children:[(d=T())==null?void 0:d.map(s=>o.jsx(n.Option,{value:s.value,children:o.jsx(D,{bordered:!1,color:s.color,children:s.label})},`${z.generate()}`)),u&&o.jsx(n.Option,{value:"redirectURL",children:"+ "+p(j)})]})};export{Q as S};
