import{r as a,j as e,m as Ce,n as Le,u as Fe}from"./index-BcLHfmte.js";import"./currency.es-9OAR_aOO.js";import{F as Ne,D as $e,E as Ue,s as Me,O as C,T as Q,a as xe,C as ye,S as ge,b as V,B as je,c as _e,d as fe,I as Ee}from"./ErpApp-CrEd8Ed2.js";import{O as ke,g as De,b3 as We,b4 as Qe,aU as Ve,b5 as He,b0 as Be,aZ as d,b6 as H,aM as S,aL as f,aB as O,aN as K,aY as Ge}from"./IdurarOs-CAA7UmI0.js";import{u as Je}from"./useFetch-CKWIxCrW.js";import{e as ve}from"./actions-C1Z5BreB.js";import{F as Ke}from"./Table-DN9_T6-a.js";import{A as G}from"./index-X3Awg6HF.js";import{W as Ye}from"./WarningOutlined-7bZbew7b.js";import{C as B}from"./index-DWTf_gVa.js";import{P as Ze}from"./progress-v35TbyEc.js";import{C as J}from"./CheckCircleOutlined-D-f5eU-1.js";import{T as L}from"./Timeline-DQMinXzz.js";import{C as Xe}from"./ClockCircleOutlined-ichCekxJ.js";import"./Skeleton-E-DIzMqP.js";import"./index-D1ScPv_Q.js";import"./PlusOutlined-BfQRORD2.js";var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M193 796c0 17.7 14.3 32 32 32h574c17.7 0 32-14.3 32-32V563c0-176.2-142.8-319-319-319S193 386.8 193 563v233zm72-233c0-136.4 110.6-247 247-247s247 110.6 247 247v193H404V585c0-5.5-4.5-10-10-10h-44c-5.5 0-10 4.5-10 10v171h-75V563zm-48.1-252.5l39.6-39.6c3.1-3.1 3.1-8.2 0-11.3l-67.9-67.9a8.03 8.03 0 00-11.3 0l-39.6 39.6a8.03 8.03 0 000 11.3l67.9 67.9c3.1 3.1 8.1 3.1 11.3 0zm669.6-79.2l-39.6-39.6a8.03 8.03 0 00-11.3 0l-67.9 67.9a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l67.9-67.9c3.1-3.2 3.1-8.2 0-11.3zM832 892H192c-17.7 0-32 14.3-32 32v24c0 4.4 3.6 8 8 8h688c4.4 0 8-3.6 8-8v-24c0-17.7-14.3-32-32-32zM484 180h56c4.4 0 8-3.6 8-8V76c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v96c0 4.4 3.6 8 8 8z"}}]},name:"alert",theme:"outlined"},et=function(i,s){return a.createElement(ke,De({},i,{ref:s,icon:qe}))};const be=a.forwardRef(et);var tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},st=function(i,s){return a.createElement(ke,De({},i,{ref:s,icon:tt}))};const Se=a.forwardRef(st);function ze({...o}){const i=Ve();let{entity:s,dataTableColumns:h}=o;const n=[{label:i("Show"),key:"read",icon:e.jsx(We,{})},{label:i("Edit"),key:"edit",icon:e.jsx(Qe,{})},{label:i("Download"),key:"download",icon:e.jsx(Ne,{})}],v=Ce(),r=Le(),N=x=>{r(ve.currentItem({data:x})),v(`/${s}/read/${x._id}`)},b=x=>{r(ve.currentAction({actionType:"update",data:x})),v(`/${s}/update/${x._id}`)},$=x=>{window.open(`${He}${s}/${s}-${x._id}.pdf`,"_blank")};h=[...h,{title:"",key:"action",render:(x,y)=>e.jsx($e,{menu:{items:n,onClick:({key:A})=>{switch(A){case"read":N(y);break;case"edit":b(y);break;case"download":$(y);break}}},trigger:["click"],children:e.jsx(Ue,{style:{cursor:"pointer",fontSize:"24px"},onClick:A=>A.preventDefault()})})}];const c=()=>Be.list({entity:s}),{result:P,isLoading:m,isSuccess:R}=Je(c),l=()=>R&&P?P.slice(0,5):[];return e.jsx(Ke,{columns:h,rowKey:x=>x._id,dataSource:R&&l(),pagination:!1,loading:m,scroll:{x:!0}})}const{Title:j,Text:bt}=Ge;function u(){return{Authorization:`Bearer ${((JSON.parse(localStorage.getItem("auth"))||{}).current||{}).token}`}}function g({icon:o,label:i,value:s,color:h,subtitle:n,loading:v,onClick:r}){return e.jsx(f,{xs:12,sm:8,md:6,lg:4,children:e.jsxs(B,{onClick:r,style:{borderRadius:10,border:`1px solid ${h}22`,cursor:r?"pointer":"default",transition:"box-shadow 0.2s"},bodyStyle:{padding:"14px 12px",textAlign:"center"},hoverable:!!r,children:[e.jsx("div",{style:{fontSize:24,color:h,marginBottom:4},children:o}),v?e.jsx(K,{size:"small"}):e.jsx("div",{style:{fontSize:24,fontWeight:800,color:"#034D57",lineHeight:1},children:(s==null?void 0:s.toLocaleString())??"—"}),e.jsx("div",{style:{fontSize:12,color:"#555",marginTop:3,fontWeight:600},children:i}),n&&e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:1},children:n})]})})}function z({title:o,value:i,subtitle:s,loading:h,color:n="#034D57"}){const v=!h&&i!==void 0?Number(i||0).toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}):null;return e.jsx(f,{xs:12,sm:12,md:6,lg:6,children:e.jsxs(B,{style:{borderRadius:10,borderLeft:`3px solid ${n}`},bodyStyle:{padding:"14px 16px"},children:[e.jsx("div",{style:{fontSize:12,color:"#888",fontWeight:600,marginBottom:6},children:o}),h?e.jsx(K,{size:"small"}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:7},children:[e.jsx(C,{size:14,style:{filter:"brightness(0) saturate(100%) invert(20%) sepia(60%) saturate(400%) hue-rotate(160deg)"}}),e.jsx("span",{style:{fontSize:20,fontWeight:800,color:n,fontVariantNumeric:"tabular-nums"},children:v??"0.000"})]}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:s})]})})}function F({done:o,label:i,action:s,path:h,navigate:n}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"6px 0",borderBottom:"1px solid #f0f0f0"},children:[o?e.jsx(J,{style:{color:"#52c41a",fontSize:16}}):e.jsx(Xe,{style:{color:"#faad14",fontSize:16}}),e.jsx("span",{style:{flex:1,fontSize:13,color:o?"#888":"#333",textDecoration:o?"line-through":"none"},children:i}),!o&&e.jsxs(O,{size:"small",type:"link",style:{color:"#034D57",padding:0},onClick:()=>n(h),children:[s," →"]})]})}function ot(){var q,ee,te,se,oe,ie,le,ne,ae,re,ce,de,ue,he;const o=Ce(),i=Fe(Me),[s,h]=a.useState(null),[n,v]=a.useState(!0),[r,N]=a.useState(null),[b,$]=a.useState(null),[c,P]=a.useState(null),[m,R]=a.useState(null),[l,x]=a.useState(null),[y,A]=a.useState(null),[Y,Ae]=a.useState(!0);a.useEffect(()=>{fetch(d+"rfq/stats",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&h(t.result)}).catch(()=>{}).finally(()=>v(!1)),fetch(d+"opportunity/stats",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&N(t.result)}).catch(()=>{}),fetch(d+"employee/stats",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&P(t.result)}).catch(()=>{}),Promise.all([fetch(d+"vendorbill/ap-summary",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"expense/summary",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"bankaccount/list",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"project/list?status=active",{headers:u()}).then(t=>t.json()).catch(()=>({}))]).then(([t,p,w,D])=>{$({apDue:t.grandTotal||0,expTotal:p.grandTotal||0,bankBal:(w.result||[]).reduce((I,T)=>I+(T.currency==="OMR"&&T.currentBalance||0),0),activeProj:(D.result||[]).length})}).catch(()=>{}),Promise.all([fetch(d+"employee/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"product/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"bankaccount/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"client/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({}))]).then(([t,p,w,D])=>{var I,T,pe,me;R({employees:((I=t.pagination)==null?void 0:I.count)||0,products:((T=p.pagination)==null?void 0:T.count)||0,bankAccounts:((pe=w.pagination)==null?void 0:pe.count)||0,clients:((me=D.pagination)==null?void 0:me.count)||0})}).catch(()=>{}),Promise.all([fetch(d+"reports/overdue",{headers:u()}).then(t=>t.json()).catch(()=>({})),fetch(d+"payrollrun/list?items=1",{headers:u()}).then(t=>t.json()).catch(()=>({}))]).then(([t,p])=>{x({overdueCount:(t.result||[]).length,overdueAmount:(t.result||[]).reduce((w,D)=>w+(D.total-(D.totalPaid||0)),0),lastPayroll:(p.result||[])[0]||null})}).catch(()=>{}),fetch(d+"rfq/recent-activity",{headers:u()}).then(t=>t.json()).then(t=>{t.success&&A(t.result)}).catch(()=>{}).finally(()=>Ae(!1))},[]);const U=async({entity:t,currency:p})=>Be.summary({entity:t,options:{currency:p}}),{result:k,isLoading:Z,onFetch:we}=H(),{result:M,isLoading:Te,onFetch:Oe}=H(),{result:_,isLoading:Pe,onFetch:Re}=H();a.useEffect(()=>{const t=(i==null?void 0:i.default_currency_code)||"OMR";we(U({entity:"invoice",currency:t})),Oe(U({entity:"quote",currency:t})),Re(U({entity:"payment",currency:t}))},[i==null?void 0:i.default_currency_code]);const X=[{title:"#",dataIndex:"number",width:70},{title:"Client",dataIndex:["client","name"],ellipsis:!0},{title:"Total",dataIndex:"total",align:"right",render:t=>e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:12},children:[e.jsx(C,{size:10}),Number(t||0).toLocaleString("en-US",{minimumFractionDigits:3})]})},{title:"Status",dataIndex:"status",width:90,render:t=>e.jsx("span",{style:{fontSize:12,textTransform:"capitalize"},children:t})}];if(!i)return null;const E=m?[m.employees>0,m.products>0,m.bankAccounts>0,m.clients>0].filter(Boolean).length:0,W=4,Ie=m&&E<W;return e.jsxs(e.Fragment,{children:[l&&(l.overdueCount>0||((q=s==null?void 0:s.byPriority)==null?void 0:q.ior)>0)&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsx(j,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:12,letterSpacing:1.5,marginBottom:10},children:"Today at a Glance"}),e.jsxs(S,{gutter:[10,10],children:[l.overdueCount>0&&e.jsx(f,{xs:24,sm:12,children:e.jsx(G,{type:"error",showIcon:!0,icon:e.jsx(Ye,{}),message:e.jsxs("span",{children:[e.jsx("strong",{children:l.overdueCount})," overdue invoice",l.overdueCount>1?"s":""," — total"," ",e.jsxs("strong",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(C,{size:10})," ",Number(l.overdueAmount||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),action:e.jsx(O,{size:"small",onClick:()=>o("/invoice"),children:"View"}),style:{borderRadius:8}})}),((ee=s==null?void 0:s.byPriority)==null?void 0:ee.ior)>0&&e.jsx(f,{xs:24,sm:12,children:e.jsx(G,{type:"warning",showIcon:!0,icon:e.jsx(be,{}),message:e.jsxs("span",{children:[e.jsx("strong",{children:s.byPriority.ior})," IOR priority RFQ",s.byPriority.ior>1?"s":""," need quoting"]}),action:e.jsx(O,{size:"small",onClick:()=>o("/rfq?priority=ior"),children:"View"}),style:{borderRadius:8}})}),l.lastPayroll&&e.jsx(f,{xs:24,sm:12,children:e.jsx(G,{type:l.lastPayroll.status==="draft"?"warning":"info",showIcon:!0,icon:e.jsx(C,{size:14,color:"#fa8c16"}),message:e.jsxs("span",{children:["Payroll ",l.lastPayroll.month,"/",l.lastPayroll.year," is"," ",e.jsx(Q,{color:l.lastPayroll.status==="approved"?"green":l.lastPayroll.status==="paid"?"blue":"orange",style:{marginLeft:4},children:(te=l.lastPayroll.status)==null?void 0:te.toUpperCase()})]}),action:e.jsx(O,{size:"small",onClick:()=>o("/payroll"),children:"View"}),style:{borderRadius:8}})})]})]}),Ie&&e.jsx("div",{style:{marginBottom:20},children:e.jsxs(B,{style:{borderRadius:10,borderLeft:"4px solid #faad14"},bodyStyle:{padding:"16px 20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs(j,{level:5,style:{margin:0,color:"#034D57"},children:["Setup Checklist — ",E,"/",W," complete"]}),e.jsx(Ze,{type:"circle",size:44,percent:Math.round(E/W*100),strokeColor:"#4CB480",format:t=>e.jsxs("span",{style:{fontSize:12,fontWeight:700},children:[t,"%"]})})]}),e.jsx(F,{done:m.clients>0,label:"Add clients/customers",action:"Add client",path:"/customer",navigate:o}),e.jsx(F,{done:m.products>0,label:"Add products & services catalog",action:"Add products",path:"/products",navigate:o}),e.jsx(F,{done:m.employees>0,label:"Add employees with salary details",action:"Add employees",path:"/employees",navigate:o}),e.jsx(F,{done:m.bankAccounts>0,label:"Configure bank accounts",action:"Add bank account",path:"/bank-accounts",navigate:o})]})}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx(j,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:12,letterSpacing:1.5,marginBottom:12},children:"Quick Actions"}),e.jsx(S,{gutter:[12,12],children:[{label:"New Quote",icon:e.jsx(xe,{}),color:"#034D57",path:"/quote/create"},{label:"New Invoice",icon:e.jsx(ye,{}),color:"#4CB480",path:"/invoice/create"},{label:"New PO",icon:e.jsx(ge,{}),color:"#722ed1",path:"/purchase-order/create"},{label:"View RFQs",icon:e.jsx(V,{}),color:"#1890ff",path:"/rfq"},{label:"Opportunities",icon:e.jsx(je,{}),color:"#fa8c16",path:"/opportunities"},{label:"Add Employee",icon:e.jsx(Se,{}),color:"#52c41a",path:"/employees"}].map(t=>e.jsx(f,{xs:12,sm:8,md:4,children:e.jsx(O,{block:!0,icon:t.icon,onClick:()=>o(t.path),style:{height:52,borderRadius:8,borderColor:t.color,color:t.color,fontWeight:600,fontSize:13},children:t.label})},t.label))})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(j,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:12,letterSpacing:1.5,marginBottom:12},children:"Procurement"}),e.jsxs(S,{gutter:[12,12],children:[e.jsx(g,{icon:e.jsx(V,{}),label:"Total RFQs",value:s==null?void 0:s.total,color:"#034D57",loading:n,onClick:()=>o("/rfq")}),e.jsx(g,{icon:e.jsx(_e,{}),label:"Active",value:s==null?void 0:s.active,color:"#1890ff",subtitle:"open RFQs",loading:n,onClick:()=>o("/rfq?status=new,in_progress,researched")}),e.jsx(g,{icon:e.jsx(be,{}),label:"IOR",value:(se=s==null?void 0:s.byPriority)==null?void 0:se.ior,color:"#ff4d4f",subtitle:"priority",loading:n,onClick:()=>o("/rfq?priority=ior")}),e.jsx(g,{icon:e.jsx(J,{}),label:"Quoted",value:(oe=s==null?void 0:s.byStatus)==null?void 0:oe.quoted,color:"#52c41a",loading:n,onClick:()=>o("/rfq?status=quoted")}),e.jsx(g,{icon:e.jsx(fe,{}),label:"Suppliers",value:s==null?void 0:s.totalVendors,color:"#4CB480",loading:n,onClick:()=>o("/suppliers")}),e.jsx(g,{icon:e.jsx(ge,{}),label:"Parts",value:s==null?void 0:s.totalParts,color:"#722ed1",loading:n,onClick:()=>o("/parts")}),e.jsx(g,{icon:e.jsx(je,{}),label:"Opportunities",value:(r==null?void 0:r.total)??"—",color:"#fa8c16",subtitle:r!=null&&r.highPriority?`${r.highPriority} high priority`:void 0,loading:!1,onClick:()=>o("/opportunities")})]})]}),e.jsx("div",{className:"space20"}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(j,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:12,letterSpacing:1.5,marginBottom:12},children:"Financial Summary"}),e.jsxs(S,{gutter:[12,12],children:[e.jsx(z,{title:"Invoices This Month",value:k==null?void 0:k.total,loading:Z,color:"#034D57",subtitle:"billed"}),e.jsx(z,{title:"Quotes This Month",value:M==null?void 0:M.total,loading:Te,color:"#1890ff",subtitle:"proposed"}),e.jsx(z,{title:"Received Payments",value:_==null?void 0:_.total,loading:Pe,color:"#52c41a",subtitle:"this month"}),e.jsx(z,{title:"Unpaid Balance",value:k==null?void 0:k.total_undue,loading:Z,color:"#ff4d4f",subtitle:"outstanding"})]})]}),e.jsx("div",{className:"space20"}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(j,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:12,letterSpacing:1.5,marginBottom:12},children:"HR & Payroll"}),e.jsxs(S,{gutter:[12,12],children:[e.jsx(g,{icon:e.jsx(fe,{}),label:"Total Staff",value:(c==null?void 0:c.total)??0,color:"#034D57",onClick:()=>o("/employees")}),e.jsx(g,{icon:e.jsx(J,{}),label:"Active",value:(c==null?void 0:c.active)??0,color:"#52c41a",subtitle:"employees",onClick:()=>o("/employees")}),e.jsx(g,{icon:e.jsx(Se,{}),label:"Departments",value:((ie=c==null?void 0:c.byDept)==null?void 0:ie.length)??0,color:"#722ed1",subtitle:"active",onClick:()=>o("/employees")}),e.jsx(f,{xs:12,sm:12,md:6,lg:4,children:e.jsxs(B,{bodyStyle:{padding:"14px 12px",textAlign:"center"},style:{borderRadius:10,border:"1px solid #fa8c1622",cursor:"pointer"},hoverable:!0,onClick:()=>o("/payroll"),children:[e.jsx("div",{style:{fontSize:24,color:"#fa8c16",marginBottom:4},children:e.jsx(C,{size:24,color:"#fa8c16"})}),e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#034D57"},children:l!=null&&l.lastPayroll?e.jsxs(Q,{color:l.lastPayroll.status==="paid"?"blue":"orange",children:[l.lastPayroll.month,"/",l.lastPayroll.year," — ",(le=l.lastPayroll.status)==null?void 0:le.toUpperCase()]}):e.jsx("span",{style:{color:"#aaa",fontSize:12},children:"No runs yet"})}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:4},children:"Payroll"})]})}),e.jsx(g,{icon:e.jsx(Ee,{}),label:"Attendance",value:((ne=c==null?void 0:c.today)==null?void 0:ne.present)??0,color:"#1890ff",subtitle:"present today",onClick:()=>o("/attendance")})]})]}),e.jsx("div",{className:"space20"}),b&&e.jsxs("div",{style:{marginBottom:6},children:[e.jsx(j,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:12,letterSpacing:1.5,marginBottom:12},children:"Business Health"}),e.jsxs(S,{gutter:[12,12],children:[e.jsx(z,{title:"AP Due (Vendor Bills)",value:b.apDue,color:"#e53e3e",subtitle:"total accounts payable"}),e.jsx(z,{title:"Expenses (All Time)",value:b.expTotal,color:"#fa8c16",subtitle:"approved + paid"}),e.jsx(z,{title:"Bank Balance (OMR)",value:b.bankBal,color:"#4CB480",subtitle:"OMR accounts only"}),e.jsx(f,{xs:12,sm:12,md:6,lg:6,children:e.jsxs(B,{style:{borderRadius:10,borderLeft:"3px solid #1890ff",cursor:"pointer"},bodyStyle:{padding:"14px 16px"},onClick:()=>o("/projects?status=active"),children:[e.jsx("div",{style:{fontSize:12,color:"#888",fontWeight:600,marginBottom:6},children:"Active Projects"}),e.jsx("div",{style:{fontSize:28,fontWeight:800,color:"#1890ff"},children:b.activeProj}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:"click to view"})]})})]})]}),e.jsx("div",{className:"space30"}),y&&!Y&&(((ae=y.newRfqs)==null?void 0:ae.length)>0||((re=y.recentQuotes)==null?void 0:re.length)>0||((ce=y.recentInvoices)==null?void 0:ce.length)>0)&&e.jsxs("div",{style:{marginBottom:30},children:[e.jsx(j,{level:5,style:{color:"#034D57",textTransform:"uppercase",fontSize:12,letterSpacing:1.5,marginBottom:12},children:"Recent Activity (Last 7 Days)"}),e.jsx(B,{style:{borderRadius:10},bodyStyle:{padding:"20px"},children:Y?e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx(K,{})}):e.jsxs(L,{mode:"left",children:[(de=y.newRfqs)==null?void 0:de.slice(0,5).map(t=>e.jsx(L.Item,{dot:e.jsx(V,{style:{fontSize:14,color:"#034D57"}}),color:"#034D57",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>o(`/rfq/${t._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#034D57"},children:["RFQ #",t.rfqNumber," received",t.priority==="ior"&&e.jsx(Q,{color:"red",style:{marginLeft:6,fontSize:10},children:"IOR"})]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:2},children:t.subject||t.client||"No subject"}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(t.receivedAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`rfq-${t._id}`)),(ue=y.recentQuotes)==null?void 0:ue.slice(0,3).map(t=>{var p;return e.jsx(L.Item,{dot:e.jsx(xe,{style:{fontSize:14,color:"#1890ff"}}),color:"#1890ff",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>o(`/quote/${t._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#1890ff"},children:["Quote #",t.number,"/",t.year," created"]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:2},children:[((p=t.client)==null?void 0:p.name)||"No client"," —"," ",e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(C,{size:9}),Number(t.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`quote-${t._id}`)}),(he=y.recentInvoices)==null?void 0:he.slice(0,3).map(t=>{var p;return e.jsx(L.Item,{dot:e.jsx(ye,{style:{fontSize:14,color:"#52c41a"}}),color:"#52c41a",children:e.jsxs("div",{style:{cursor:"pointer",padding:"4px 0"},onClick:()=>o(`/invoice/${t._id}`),children:[e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:"#52c41a"},children:["Invoice #",t.number,"/",t.year," created"]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:2},children:[((p=t.client)==null?void 0:p.name)||"No client"," —"," ",e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx(C,{size:9}),Number(t.total||0).toLocaleString("en-US",{minimumFractionDigits:3})]})]}),e.jsx("div",{style:{fontSize:11,color:"#aaa",marginTop:2},children:new Date(t.date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})},`invoice-${t._id}`)})]})})]}),e.jsxs(S,{gutter:[16,16],children:[e.jsx(f,{xs:24,lg:12,children:e.jsxs("div",{className:"whiteBox shadow pad20",style:{borderRadius:8},children:[e.jsx(j,{level:5,style:{color:"#034D57",marginBottom:12},children:"Recent Invoices"}),e.jsx(ze,{entity:"invoice",dataTableColumns:X})]})}),e.jsx(f,{xs:24,lg:12,children:e.jsxs("div",{className:"whiteBox shadow pad20",style:{borderRadius:8},children:[e.jsx(j,{level:5,style:{color:"#034D57",marginBottom:12},children:"Recent Quotes"}),e.jsx(ze,{entity:"quote",dataTableColumns:X})]})})]})]})}function St(){return e.jsx(ot,{})}export{St as default};
