import{r as e,m as _,j as o}from"./index-COaFcvEx.js";import{aU as $,b0 as k}from"./IdurarOs-xaNdaDtf.js";import{u as z}from"./useFetch-CHu1alYQ.js";import{s as B}from"./index-KrFx5yLV.js";import{c as D}from"./color-CnuJOIlI.js";import{e as n,T as G}from"./ErpApp-ylpRU2yB.js";const W=({entity:h,displayLabels:x=["name"],outputValue:c="_id",redirectLabel:j="",withRedirect:u=!1,urlToRedirect:L="/",placeholder:S="select",value:t,onChange:i})=>{var d;const b=$(),[p,v]=e.useState([]),[E,m]=e.useState(void 0),O=_(),R=()=>k.list({entity:h}),{result:U,isLoading:f,isSuccess:l}=z(R);e.useEffect(()=>{l&&v(U)},[l]);const y=s=>x.map(r=>s[r]).join(" ");e.useEffect(()=>{if(t!==void 0){const s=(t==null?void 0:t[c])??t;m(s),i(s)}},[t]);const C=s=>{if(s==="redirectURL")O(L);else{const r=(s==null?void 0:s[c])??s;m(s),i(r)}},T=()=>{const s=[];return p.map(r=>{var g;const q=r[c]??r,A=y(r),I=((g=r[c])==null?void 0:g.color)??(r==null?void 0:r.color),a=D.find(N=>N.color===I);s.push({value:q,label:A,color:a==null?void 0:a.color})}),s};return o.jsxs(n,{loading:f,disabled:f,value:E,onChange:C,placeholder:S,children:[(d=T())==null?void 0:d.map(s=>o.jsx(n.Option,{value:s.value,children:o.jsx(G,{bordered:!1,color:s.color,children:s.label})},`${B.generate()}`)),u&&o.jsx(n.Option,{value:"redirectURL",children:"+ "+b(j)})]})};export{W as S};
