import{r as s,o as v,m as O,j as e}from"./index-DCPoF18Q.js";import{O as y,g as b,aV as C,aN as L,aM as P,aL as h,aB as x,aS as z,aY as B}from"./IdurarOs-36KeyrIs.js";import{r as j,S as E,T as f,O as R}from"./ErpApp-BmqyEhL9.js";import{C as o}from"./index-B0hILtK3.js";import{B as l}from"./Breadcrumb-BBioVEgO.js";import{D as a}from"./index-CUVOI16b.js";import{F as T}from"./Table-DV-_NL6F.js";import{A}from"./ArrowLeftOutlined-CrHXb71a.js";import{G as D}from"./GlobalOutlined-DdBQ94P6.js";import{P as N}from"./PhoneOutlined-B1kOdEGg.js";import"./Skeleton-CywRa_UZ.js";import"./index-DuJkkBYn.js";import"./PlusOutlined-B7gL6haF.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},F=function(n,t){return s.createElement(y,b({},n,{ref:t,icon:$}))};const M=s.forwardRef(F);var _={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},V=function(n,t){return s.createElement(y,b({},n,{ref:t,icon:_}))};const U=s.forwardRef(V);function G(){var i,n;try{const t=(n=(i=JSON.parse(localStorage.getItem("auth")||"{}"))==null?void 0:i.current)==null?void 0:n.token;return t?{Authorization:`Bearer ${t}`}:{}}catch{return{}}}const{Title:g,Text:c}=B;function ie(){var m,u;const{id:i}=v(),n=O(),[t,w]=s.useState(null),[S,d]=s.useState(!0);s.useEffect(()=>{fetch(C+`vendor/read/${i}`,{headers:G()}).then(r=>r.json()).then(r=>{r.success&&w(r.result),d(!1)}).catch(()=>d(!1))},[i]);const k=()=>{n("/purchase-order/create",{state:{prefilledVendor:t}})};if(S)return e.jsx("div",{style:{textAlign:"center",padding:80},children:e.jsx(L,{size:"large"})});if(!t)return e.jsx(o,{children:e.jsx(c,{children:"Vendor not found"})});const I=[{title:"Part Number",dataIndex:["part","partNumber"],key:"partNumber",width:140,render:r=>e.jsx(c,{strong:!0,style:{color:"#034D57",fontSize:13},children:r||"—"})},{title:"Description",dataIndex:["part","description"],key:"description",ellipsis:!0},{title:"Product URL",dataIndex:"productUrl",key:"productUrl",width:100,render:r=>r?e.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",style:{fontSize:12},children:[e.jsx(U,{})," View"]}):"—"},{title:"Price Indication",dataIndex:"priceIndication",key:"priceIndication",width:130,render:r=>r||"—"},{title:"Quoted Price",dataIndex:"quotedPrice",key:"quotedPrice",width:130,render:(r,p)=>r?e.jsxs(j,{size:0,children:[e.jsx(R,{}),e.jsx(c,{children:r.toFixed(3)})]}):"—"},{title:"Lead Time",dataIndex:"leadTime",key:"leadTime",width:100},{title:"Score",dataIndex:"score",key:"score",width:80,render:r=>e.jsx(f,{color:r>=7?"green":r>=5?"orange":"default",children:r||5})},{title:"Added",dataIndex:"created",key:"created",width:100,render:r=>r?new Date(r).toLocaleDateString("en-GB"):"—"}];return e.jsxs("div",{style:{paddingBottom:24},children:[e.jsxs(l,{style:{marginBottom:16},children:[e.jsx(l.Item,{children:"Procurement"}),e.jsx(l.Item,{children:e.jsx("a",{onClick:()=>n("/suppliers"),children:"Suppliers"})}),e.jsx(l.Item,{children:t.companyName})]}),e.jsxs(P,{justify:"space-between",align:"middle",style:{marginBottom:16},children:[e.jsx(h,{children:e.jsxs(j,{children:[e.jsx(x,{icon:e.jsx(A,{}),onClick:()=>n("/suppliers"),children:"Back"}),e.jsx(g,{level:4,style:{margin:0,color:"#034D57"},children:t.companyName})]})}),e.jsx(h,{children:e.jsx(x,{type:"primary",icon:e.jsx(E,{}),onClick:k,style:{background:"#034D57"},children:"Create Purchase Order"})})]}),e.jsx(o,{style:{marginBottom:16,borderRadius:8},children:e.jsxs(a,{column:{xs:1,sm:2,md:3},size:"small",children:[t.website&&e.jsx(a.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(D,{})," Website"]}),children:e.jsx("a",{href:t.website.startsWith("http")?t.website:`https://${t.website}`,target:"_blank",rel:"noreferrer",children:t.website.replace(/^https?:\/\//,"")})}),t.country&&e.jsx(a.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(M,{})," Country"]}),children:t.country}),t.contactEmail&&e.jsx(a.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(z,{})," Email"]}),children:e.jsx("a",{href:`mailto:${t.contactEmail}`,children:t.contactEmail})}),t.contactPhone&&e.jsx(a.Item,{label:e.jsxs(e.Fragment,{children:[e.jsx(N,{})," Phone"]}),children:t.contactPhone}),t.specialties&&t.specialties.length>0&&e.jsx(a.Item,{label:"Specialties",span:3,children:t.specialties.map((r,p)=>e.jsx(f,{style:{margin:"2px 4px"},children:r},p))})]})}),e.jsxs(o,{style:{borderRadius:8},bodyStyle:{padding:0},children:[e.jsx("div",{style:{padding:16,borderBottom:"1px solid #f0f0f0"},children:e.jsxs(g,{level:5,style:{margin:0},children:["Parts Sourced from This Supplier (",((m=t.supplierResults)==null?void 0:m.length)||0,")"]})}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsx(T,{dataSource:t.supplierResults||[],columns:I,rowKey:"_id",size:"small",pagination:((u=t.supplierResults)==null?void 0:u.length)>25?{pageSize:25}:!1,locale:{emptyText:"No parts sourced from this supplier yet."}})})]})]})}export{ie as default};
