import{r as e,m as _,j as o}from"./index-DSqNk8PS.js";import{an as $,at as k}from"./IdurarOs-CVkaJ9eK.js";import{u as z}from"./useFetch-BCN9Vr5d.js";import{s as B}from"./index-KrFx5yLV.js";import{c as D}from"./color-CnuJOIlI.js";import{S as n}from"./index-pozuGUvC.js";import{T as G}from"./index-CkLQpGCJ.js";const X=({entity:h,displayLabels:x=["name"],outputValue:c="_id",redirectLabel:S="",withRedirect:j=!1,urlToRedirect:u="/",placeholder:L="select",value:t,onChange:i})=>{var d;const p=$(),[v,b]=e.useState([]),[E,m]=e.useState(void 0),O=_(),R=()=>k.list({entity:h}),{result:y,isLoading:f,isSuccess:l}=z(R);e.useEffect(()=>{l&&b(y)},[l]);const C=s=>x.map(r=>s[r]).join(" ");e.useEffect(()=>{if(t!==void 0){const s=(t==null?void 0:t[c])??t;m(s),i(s)}},[t]);const T=s=>{if(s==="redirectURL")O(u);else{const r=(s==null?void 0:s[c])??s;m(s),i(r)}},U=()=>{const s=[];return v.map(r=>{var g;const q=r[c]??r,A=C(r),I=((g=r[c])==null?void 0:g.color)??(r==null?void 0:r.color),a=D.find(N=>N.color===I);s.push({value:q,label:A,color:a==null?void 0:a.color})}),s};return o.jsxs(n,{loading:f,disabled:f,value:E,onChange:T,placeholder:L,children:[(d=U())==null?void 0:d.map(s=>o.jsx(n.Option,{value:s.value,children:o.jsx(G,{bordered:!1,color:s.color,children:s.label})},`${B.generate()}`)),j&&o.jsx(n.Option,{value:"redirectURL",children:"+ "+p(S)})]})};export{X as S};
