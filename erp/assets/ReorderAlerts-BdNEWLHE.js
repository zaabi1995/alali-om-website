import{r as n,j as e}from"./index-DsxgoXaO.js";import{o as A}from"./omrFormat-C3L8_xkq.js";import{aM as C,aL as c,aY as I,aV as O}from"./IdurarOs-BmcscLXI.js";import{e as d,h as k,ad as T,T as s,z as R}from"./ErpApp-3NZWEkOD.js";import{A as B}from"./index-tD_2MUNK.js";import{C as a}from"./index-D7xQuJHc.js";import{S as u}from"./index-BSG--CcV.js";import{F as N}from"./Table-B_wqoxqg.js";import{W as h}from"./WarningOutlined-BfV2mE7T.js";import{A as f}from"./AlertOutlined-C3S7H-2C.js";import"./Skeleton-DKI-OLNZ.js";import"./index-HED-hjAe.js";import"./PlusOutlined-C2sCGP9k.js";k.extend(T);const{Title:E}=I;function L(){return{Authorization:`Bearer ${((JSON.parse(localStorage.getItem("auth"))||{}).current||{}).token}`}}function z(o){return A(o)}function V(){const[o,j]=n.useState([]),[g,m]=n.useState(!1),[x,p]=n.useState({critical:0,high:0,medium:0}),y=async()=>{m(!0);try{const t=await(await fetch(O+"inventoryitem/reorder-alerts",{headers:L()})).json();if(t.success){j(t.result||[]);const i=t.result.filter(l=>l.severity==="critical").length,w=t.result.filter(l=>l.severity==="high").length,b=t.result.filter(l=>l.severity==="medium").length;p({critical:i,high:w,medium:b})}}finally{m(!1)}};n.useEffect(()=>{y()},[]);const v=r=>r==="critical"?"red":r==="high"?"orange":"yellow",S=[{title:"Severity",dataIndex:"severity",width:100,render:r=>e.jsx(s,{color:v(r),icon:e.jsx(h,{}),children:r.toUpperCase()}),sorter:(r,t)=>{const i={critical:3,high:2,medium:1};return(i[t.severity]||0)-(i[r.severity]||0)},defaultSortOrder:"ascend"},{title:"Part Number",dataIndex:"partNumber",render:r=>e.jsx("strong",{children:r}),width:140},{title:"Description",dataIndex:"description",ellipsis:!0},{title:"Available Stock",dataIndex:"qtyAvailable",align:"center",width:120,render:r=>e.jsx(R,{count:r,showZero:!0,style:{backgroundColor:r===0?"#e53e3e":"#f59e0b"}})},{title:"Reorder Level",dataIndex:"reorderLevel",align:"center",width:120,render:r=>e.jsx(s,{color:"blue",children:r})},{title:"Max Stock",dataIndex:"maxStock",align:"center",width:100,render:r=>r>0?r:"â€”"},{title:"Suggested Order Qty",dataIndex:"suggestedOrderQty",align:"center",width:150,render:r=>e.jsx("strong",{style:{color:"#4CB480",fontSize:"16px"},children:r})},{title:"Est. Cost",dataIndex:"unitCost",align:"right",width:120,render:(r,t)=>{const i=r*t.suggestedOrderQty;return z(i)}},{title:"Stockout Forecast",dataIndex:"daysUntilStockout",width:150,render:(r,t)=>t.qtyAvailable===0?e.jsx(s,{color:"red",icon:e.jsx(f,{}),children:"OUT OF STOCK"}):r===null?e.jsx("span",{style:{color:"#999"},children:"No data"}):r<=7?e.jsxs(s,{color:"red",icon:e.jsx(d,{}),children:[r," days"]}):r<=30?e.jsxs(s,{color:"orange",icon:e.jsx(d,{}),children:[r," days"]}):e.jsxs(s,{color:"green",icon:e.jsx(d,{}),children:[r," days"]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsx("div",{style:{marginBottom:"24px"},children:e.jsxs(E,{level:3,children:[e.jsx(h,{style:{color:"#f59e0b",marginRight:"8px"}}),"Inventory Reorder Alerts"]})}),o.length===0&&!g?e.jsx(B,{message:"No Reorder Alerts",description:"All inventory items are above their reorder levels. Great job!",type:"success",showIcon:!0,style:{marginBottom:"24px"}}):e.jsxs(C,{gutter:16,style:{marginBottom:"24px"},children:[e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(u,{title:"Total Alerts",value:o.length,valueStyle:{color:"#f59e0b"},prefix:e.jsx(h,{})})})}),e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(u,{title:"Critical (Out of Stock)",value:x.critical,valueStyle:{color:"#e53e3e"},prefix:e.jsx(f,{})})})}),e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(u,{title:"High Priority",value:x.high,valueStyle:{color:"#f59e0b"},prefix:e.jsx(h,{})})})}),e.jsx(c,{span:6,children:e.jsx(a,{children:e.jsx(u,{title:"Medium Priority",value:x.medium,valueStyle:{color:"#fbbf24"},prefix:e.jsx(d,{})})})})]}),e.jsx(a,{children:e.jsx(N,{columns:S,dataSource:o,loading:g,rowKey:"_id",pagination:{pageSize:20},rowClassName:r=>r.severity==="critical"?"row-critical":r.severity==="high"?"row-high":""})}),e.jsx("style",{jsx:!0,children:`
        .row-critical {
          background-color: #fee;
        }
        .row-high {
          background-color: #fff3e0;
        }
      `})]})}export{V as default};
